<!DOCTYPE html><html lang='en'><head><title>Numerical Analysis with NumPy</title><meta charset="utf-8"><style>/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}strong{font-weight:bolder}code{font-family:monospace,monospace;font-size:1em}img{border-style:none}input{font-family:inherit;font-size:100%;line-height:1.15;margin:0}input{overflow:visible}[type=checkbox]{box-sizing:border-box;padding:0}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}blockquote,h1,h2,h3,hr,p,pre{margin:0}ul{list-style:none;margin:0;padding:0}html{font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e2e8f0}hr{border-top-width:1px}img{border-style:solid}input:-ms-input-placeholder{color:#a0aec0}input::-ms-input-placeholder{color:#a0aec0}input::-moz-placeholder{color:#a0aec0}h1,h2,h3{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}input{padding:0;line-height:inherit;color:inherit}code,pre{font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}img{display:block;vertical-align:middle}img{max-width:100%;height:auto}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}.bg-gray-200{--bg-opacity:1;background-color:#edf2f7;background-color:rgba(237,242,247,var(--bg-opacity))}.bg-gray-300{--bg-opacity:1;background-color:#e2e8f0;background-color:rgba(226,232,240,var(--bg-opacity))}.bg-orange-300{--bg-opacity:1;background-color:#fbd38d;background-color:rgba(251,211,141,var(--bg-opacity))}.bg-green-200{--bg-opacity:1;background-color:#c6f6d5;background-color:rgba(198,246,213,var(--bg-opacity))}.bg-blue-200{--bg-opacity:1;background-color:#bee3f8;background-color:rgba(190,227,248,var(--bg-opacity))}.bg-blue-300{--bg-opacity:1;background-color:#90cdf4;background-color:rgba(144,205,244,var(--bg-opacity))}.border-gray-400{--border-opacity:1;border-color:#cbd5e0;border-color:rgba(203,213,224,var(--border-opacity))}.border-gray-500{--border-opacity:1;border-color:#a0aec0;border-color:rgba(160,174,192,var(--border-opacity))}.border-indigo-500{--border-opacity:1;border-color:#667eea;border-color:rgba(102,126,234,var(--border-opacity))}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.border-solid{border-style:solid}.border{border-width:1px}.border-l-2{border-left-width:2px}.border-t{border-top-width:1px}.cursor-pointer{cursor:pointer}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.justify-center{justify-content:center}.justify-around{justify-content:space-around}.float-left{float:left}.clearfix:after{content:"";display:table;clear:both}.font-sans{font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}.font-serif{font-family:Georgia,Cambria,"Times New Roman",Times,serif}.font-semibold{font-weight:600}.font-bold{font-weight:700}.h-64{height:16rem}.text-xs{font-size:.75rem}.text-sm{font-size:.875rem}.text-base{font-size:1rem}.text-xl{font-size:1.25rem}.leading-none{line-height:1}.leading-normal{line-height:1.5}.m-2{margin:.5rem}.my-4{margin-top:1rem;margin-bottom:1rem}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mr-2{margin-right:.5rem}.mb-2{margin-bottom:.5rem}.mr-3{margin-right:.75rem}.mb-3{margin-bottom:.75rem}.mt-4{margin-top:1rem}.mb-4{margin-bottom:1rem}.mt-6{margin-top:1.5rem}.max-w-sm{max-width:24rem}.max-w-2xl{max-width:42rem}.object-contain{-o-object-fit:contain;object-fit:contain}.opacity-0{opacity:0}.overflow-hidden{overflow:hidden}.p-1{padding:.25rem}.p-2{padding:.5rem}.p-3{padding:.75rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.pl-3{padding-left:.75rem}.absolute{position:absolute}.shadow-md{box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06)}.shadow-lg{box-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -2px rgba(0,0,0,.05)}.shadow-inner{box-shadow:inset 0 2px 4px 0 rgba(0,0,0,.06)}.text-left{text-align:left}.text-center{text-align:center}.text-black{--text-opacity:1;color:#000;color:rgba(0,0,0,var(--text-opacity))}.text-gray-700{--text-opacity:1;color:#4a5568;color:rgba(74,85,104,var(--text-opacity))}.text-gray-800{--text-opacity:1;color:#2d3748;color:rgba(45,55,72,var(--text-opacity))}.whitespace-no-wrap{white-space:nowrap}.w-1\/2{width:50%}.w-2\/3{width:66.666667%}.w-full{width:100%}@media (min-width:768px){.md\:w-2\/3{width:66.666667%}}.text-tiny{font-size:.5rem!important}body{color:#000!important;font-size:1.25rem!important}.main-content{max-width:900px}.lesson{padding-left:15px!important;padding-right:10px!important;--bg-opacity:1;background-color:#edf2f7;background-color:rgba(237,242,247,var(--bg-opacity))}.main-content,html{font-family:Arial,Georgia,Verdana,"Times New Roman"!important}.lesson-footer-card,.lesson-overview-card{font-family:"Times New Roman"!important}blockquote em:first-child{font-family:Times!important;font-size:1.35em;margin-right:10px}blockquote em:first-child:after{content:":"}.lesson-footer{margin-top:50px;margin-top:20px}.lesson ul{list-style-position:inside;list-style-type:none;margin-left:1em}.lesson ul li{padding-left:1em;padding-right:5px}.lesson ul li::before{content:"‚Ä¢";padding-right:5px}span{white-space:nowrap}p.new{padding-top:0;padding-bottom:.5em}p.new+p{padding-top:.5em}h1,h2,h3{font-weight:700;margin-top:.25em!important;margin-bottom:.05em!important;font-family:Georgia,Cambria,"Times New Roman",Times,serif!important}h1{font-size:2em!important;clear:both;color:#000!important}div+h1,h2{margin-top:0!important}h2{margin-top:.5em!important;font-size:1.5em!important;clear:both;color:#8b0000!important}h3{font-size:1.25em!important;clear:both;color:#006400!important}ul{margin-bottom:30px}p.new a{text-decoration:underline}.lesson a{text-decoration:underline;color:#00f}.title-text{font-size:2rem}blockquote{font-size:1em;background:#f9f9f9;border-left:10px solid #ccc;margin:.5em 10px;padding:.5em 10px;border-left-color:#ffcd69;border-right-color:#f6ba59;quotes:"\201C""\201D""\2018""\2019"}blockquote:before{color:#ccc;content:open-quote;font-size:4em;line-height:.1em;margin-right:.25em;vertical-align:-.4em}blockquote:after{color:#ccc;content:no-close-quote}blockquote p{display:inline}.shadow-lg{box-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -2px rgba(0,0,0,.5)}img.center{-o-object-position:center;object-position:center;margin-left:auto;margin-right:auto}img.border2{border:1px solid #94add4;margin-top:.5rem;margin-bottom:.75rem}img.iw600{height:auto;width:auto;max-width:600px}code{font-size:smaller}pre code{font-size:15px}pre code:not(.line-number){background:#f4f4f4;font-family:monospace;font-size:15px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default;touch-action:none;-webkit-touch-callout:none;-webkit-tap-highlight-color:transparent;clear:both;border:1px solid #ddd;color:#666;page-break-inside:avoid;display:block;min-width:840px;max-width:840px;overflow:scroll;line-height:1.6;margin-bottom:1.6em;padding:1em 1.5em;-moz-tab-size:2;-o-tab-size:2;tab-size:2;word-wrap:break-word;white-space:pre-wrap;border-left:3px solid #f36d33}div.code-starter>pre code{border-left:3px solid #fdff44!important;background-image:radial-gradient(rgba(0,150,0,.75),#000 120%);color:#fff;font:.9rem Inconsolata,monospace}div.code-starter>pre code::after{content:"\a$_"}.tab{font-size:1rem;border-color:#8c6728}.tab-content{max-height:0;max-width:100%;transition:max-height .35s}.tab input:checked~.tab-content{max-height:100vh}.tab input:checked+label{padding:1rem;border-left-width:2px;border-color:#6574cd;background-color:#f8fafc;color:#6574cd}.tab label::after{float:right;right:0;top:0;display:block;width:1em;height:1.5em;line-height:1.5;font-size:1rem;text-align:center;transition:all .35s}.tab input[type=checkbox]+label::after{content:"+";font-weight:700;border-width:1px;border-radius:9999px;border-color:#8c6728}.tab input[type=checkbox]:checked+label::after{transform:rotate(315deg);background-color:#6574cd;color:#f8fafc}</style>
<script src="https://kit.fontawesome.com/7efc4bcee2.js" crossOrigin="anonymous"></script>
<script>
    let stateCheck = setInterval(function(){
      if (document.readyState === 'complete') {
        clearInterval(stateCheck);
        let s1 = document.getElementById('start');
        // console.log('doc is ready', s1);
        if (s1) {
           s1.setAttribute('tabindex', '-1');
           s1.focus(); 
           s1.scrollIntoView({behavior: 'smooth'}); 
           setTimeout(function(){s1.blur()}, 500);
           // console.log('focus set');
        }
      }
    }, 200);
    </script>
</head><body class="lesson"><div class="main-content lesson bg-gray-200 text-black p-1 pl-3 font-serif"><div class="md-inner">
<div id="start" class="section">&nbsp;</div><h1 class="overview"></h1><div class="lesson-overview bg-gray-200 flex justify-center"><div class="text-center px-4 py-2 m-2"><div class="lesson-overview-card displaycard bg-blue-200 max-w-sm rounded overflow-hidden shadow-lg"><div>¬†</div><img alt="Text" class="object-contain h-64 w-full" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/p4ds/ds/numpy1/html/ds-sm.png"/><div class="px-6 py-4"><div class="title-text text-center leading-none font-bold text-xl">Numerical Analysis with NumPy</div><p class="text-center mt-2 text-gray-800 text-xl">Python's super library</p><div class="text-gray-700 text-base">¬†</div><div class="text-center mb-3"><span class="inline-block bg-gray-300 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2">#info490</span></div><div class="flex border-t border-solid border-gray-500 shadow-inner justify-around bg-blue-300"><div class="text-gray-700 text-center px-4 m-2 text-sm"><span class="whitespace-no-wrap">üêç¬†¬†4 D.S.</span></div><div class="text-gray-700 text-center px-4 m-2 text-sm"><span class="whitespace-no-wrap"><strong>Version:</strong> <!-- -->SP21</span></div></div><div class="text-gray-700 mt-1 text-center text-tiny">All Rights Reserved</div></div></div></div><div class="text-center px-4 py-2 m-2 w-1/2"><div class="displaycard bg-gray-200 max-w-sm rounded overflow-hidden shadow-lg"><div class="px-6 py-4 text-left"><div class="text-center font-bold text-xl">Numerical Analysis with NumPy<br/><div><span>prerequisites</span><div class="text-center text-xs mb-2">(start only after finishing)</div><p class="max-w-sm text-gray-800 text-sm">‚¶ø <strong>bootcamp</strong></p><p class="max-w-sm text-gray-800 text-sm">‚¶ø <strong>local I/O</strong></p><p class="max-w-sm text-gray-800 text-sm">‚¶ø <strong>array slicing</strong></p><p class="max-w-sm text-gray-800 text-sm">‚¶ø <strong>naming things</strong></p></div></div></div><div class="px-6 py-4 text-left text-gray-800"><div class="text-center font-bold text-xl">Colab Notes</div><p class="max-w-sm text-sm">1. <strong>Copy</strong> this notebook <img alt="copy2drive.png" class="inline-block" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/p4ds/ds/numpy1/html/copy2drive.png"/></p><p class="max-w-sm text-sm">2. <strong>Update</strong> the <strong><code>NET_ID</code></strong> in the notebook</p><p class="max-w-sm text-gray-800 text-sm">3. <strong>Hit ‚ñ∂Ô∏è¬†</strong> to install the INFO 490 IDE</p><div class="text-center font-bold text-xl">¬†</div><div class="text-center font-bold text-xl">Jupyter/PyCharm Notes</div><p class="max-w-sm text-gray-800 text-sm text-left">The testing framework does <strong>not work</strong> (at this time) for Jupyter  notebooks or local code development.</p></div></div></div></div><h1 class="section" id="section1">Numerical Analysis with NumPy</h1><h2 id="welcome-to-numpy-pythons-super-library">Welcome to NumPy! Python's Super Library</h2><p class="new">One of the more popular libraries for working with arrays of data is 
NumPy (Numerical Python and pronounced num pie). You could use the list 
type for all your array needs; however, NumPy makes working with 
arrays (both single and multiple dimensions) easy by allowing efficient 
syntax and a large number of utility methods and functions to handle 
just about any numerical need. NumPy is also very fast. The library is 
built in C (a language Python is also implemented in) and has great 
execution time. For easy and fast array and matrix manipulation, NumPy comes to the rescue.  </p><p class="new">For doing numerical linear algebra and working with vectors and matrices, 
NumPy is the standard library (it's also at the core of most machine learning 
algorithms). Other popular libraries like Pandas and SciPy (Scientific Python) 
use NumPy as well. Learning how to effectively work with NumPy makes the 
other libraries easier to learn. Much of what you will learn in Pandas comes 
directly from NumPy.</p><p class="new">In the same spirit of this class, where we are more interested in understanding 
the concepts rather than learning recipes on how to use an API (the public
 functions and methods), we will learn the basics of NumPy within the 
 context of helping us work with data.</p><p class="new">To use NumPy you must import it; and as a convention, it's imported as np:</p><pre><code>import numpy as np</code></pre><h1 class="section" id="section2">Python List vs Numpy Array</h1><p class="new">As we have seen, a Python list can hold a set of heterogeneous 
items (e.g. strings, numbers, booleans, functions, etc). However, NumPy 
arrays can only hold multiple items of the same type. Numpy arrays are 
statically typed (vs dynamic) and homogeneous. The type of the elements is 
determined when the array is created -- it's why it can be memory efficient and fast.</p><p class="new">NumPy also makes a distinction between numbers that have no decimal 
points (aka. integers) and those that do (aka. floating point - since the 
decimal point is allowed to 'float'). Not only can you specify different 
types in NumPy (e.g. integer, float, boolean) but also how much storage you 
want those values to occupy. If you are only dealing with small 
numbers (e.g. -128 to 127) you can manage by using a single byte (8 bits) of 
data for each number; however, if you need to hold very large numbers you 
can specify up to 64 bits (8 bytes). You can see the type by using the <code>.dtype</code> 
property  For now, we won't need to worry about selecting the most suitable size.</p><blockquote><p class="new"><strong><em>Coder's Log</em></strong> You don't have to master bits and bytes for this class, but
 you should be curious why everything in computers seems to be a power 
of 2 (2,4,8,16,32,64,etc). A bit (the smallest unit capable of holding a 
value can either be on (i.e. hold a 1) or off (i.e. hold a 0). So one bit 
can hold 2 states.  Two bits could hold 4 states (on, on; on, off; off, on; off, off). 
Eight bits (a byte) can hold 2‚Å∏ == (2*2*2*2 * 2*2*2*2) == 256.  So 8
bits 
can hold 256 unique values.  One possible range of values would be the
numbers from -128 to +127.</p></blockquote><p class="new">Let's take a quick look at both the Python list and the NumPy single dimension array:</p><div class="ide code-starter clearfix"><pre><code>import numpy as np

py_list = list(range(0,10))

# numpy's version of range
np_num  = np.arange(0,10)

print(type(np_num))
print(py_list)
print(np_num)</code></pre></div><p class="new">What did you notice about how each gets printed?</p><h1 class="section" id="section3">Array Creation</h1><p class="new">There are several functions to create arrays (and more than one dimension, as we will see):</p><div class="ide code-starter clearfix"><pre><code># create an array from a Python list
data = np.array([1,2,3])
print(data)</code></pre></div><img alt="ds1.png" class="center" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/p4ds/ds/numpy1/html/ds1.png"/><p class="new">In addition, there are convenience functions to create arrays/vectors/matrices 
filled with 1's, 0's, and random numbers:
<img alt="ds2.png" class="center" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/p4ds/ds/numpy1/html/ds2.png"/><img alt="ds3.png" class="center" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/p4ds/ds/numpy1/html/ds3.png"/></p><h1 class="section" id="section4">Linspace (not a typo)</h1><p class="new">Numpy provides a way to easily divide a range into equally sized intervals. 
This is very useful when you need to create grid spacing or equally split up a discrete range.</p><pre><code>x_axis = np.linspace(0,10, 100)</code></pre><p class="new">This becomes super useful when you need to 'spin' around a portion of a circle:</p><pre><code>x_axis = np.linspace(-np.pi, np.pi, 100)</code></pre><div class="ide code-starter clearfix"><pre><code></code></pre></div><h1 class="section" id="section5">Size and Shape</h1><p class="new">You can find out how many elements are in the array using <code>.size</code> property. 
This is the preferred way (but the <code>len</code> function does work -- for one dimensional arrays).  </p><p class="new">Each NumPy array also has a <code>shape</code> attribute.  The shape is returned as a 
tuple that describes the size of each dimension For single dimension arrays, 
shape[0] is the number of elements in the array:</p><pre><code>np_num = np.arange(0,10)
print(np_num.size, np_num.shape)</code></pre><div class="ide code-starter clearfix"><pre><code></code></pre></div><p class="new">Numpy will return <code>(10,)</code> for the above single dimension array with 10 elements.</p><h1 class="section" id="section6">Operator Overload</h1><p class="new">As we have seen some of the mathematical operators work with lists:</p><pre><code>print(py_list * 3)      # concatenation 
print(py_list + py_list)# concatenation 
print(py_list + 2)      # will not work</code></pre><div class="ide code-starter clearfix"><pre><code></code></pre></div><p class="new">These operators (<code>*</code> and <code>+</code>) are defined on the list class as methods. This 
is one of the powerful features of Python.  When you create your own class 
(we have not done that yet), you can also define how some binary and unary 
operations will work.  We have seen that the set class defines the <code>-</code> operator 
for doing set difference between two sets.</p><p class="new">Since NumPy knows all the elements are the same type (usually numbers), the 
mathematical operators work on the individual elements:</p><pre><code>print(np_num * 3)      # multiply each item by 3
print(np_num + np_num) # add the corresponding items together 
print(np_num + 2)      # add two to each item
print(np_num % 2)      # modulus/remainder</code></pre><div class="ide code-starter clearfix"><pre><code></code></pre></div><p class="new">These are called <em>element-wise</em> operations since the mathematical operation 
is performed on each element in the array.</p><pre><code>data = np.array([1,2])
ones = np.ones(2)
print(data + ones)
print(data * data)</code></pre><div class="ide code-starter clearfix"><pre><code></code></pre></div><p class="new">It's very easy to build vectors/matrices of answers without using any loops:</p><div class="ide code-starter clearfix"><pre><code>miles = np.array([1,2,3])
kilometers = miles * 1.6
print(kilometers)</code></pre></div><p class="new">This can be visualized much like:</p><pre><code>[1] * [1.6] = [1.6]
[2] * [1.6] = [3.2]
[3] * [1.6] = [4.8]</code></pre><p class="new">These operations that are performed on each element in an array are 
called <em>vectorized operations</em> and also named universal functions ('UFuncs' for
 short) in NumPy.</p><p class="new">Some other functions that work on an element-wise basis:</p><pre><code>np.abs    Calculate the absolute value element-wise.
np.sin    Trigonometric sine, element-wise.
np.log    Natural logarithm, element-wise.
np.square Element-wise square of the input</code></pre><p class="new">If you need to perform an operation, element-by-element, most likely NumPy 
has a function to do it for you.</p><h2 id="none-in-numpy">None in NumPy</h2><p class="new">Numpy uses a special constant to indicate a missing value or a value that can't 
be represented by using <code>numpy.nan</code> (not a number) or <code>numpy.NaN</code>, <code>numpy.NAN</code>. 
There are several functions that can be used to determine if a value is NaN:</p><div class="ide code-starter clearfix"><pre><code>data = np.array([1,2,3, np.nan])
print(data[3])
print(np.isnan(data[3]))</code></pre></div><h1 class="section" id="section7">Simple Functions</h1><p class="new">There's also aggregation functions (functions that return a single value 
like <code>max</code>) that work with NumPy arrays as well:</p><img alt="ds4.png" class="center" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/p4ds/ds/numpy1/html/ds4.png"/><pre><code>np.sum  Compute sum of elements
np.prod Compute product of elements
np.mean Compute mean of elements
np.std  Compute standard deviation
np.var  Compute variance
np.min  Find minimum value
np.max  Find maximum value
np.argmin  Returns the index of minimum value
np.argmax  Returns the index of maximum value
np.median Compute median of elements
np.percentile Compute rank-based statistics of elements
np.any  Evaluate whether any elements are true
np.all Evaluate whether all elements are true
np.ptp  Calculates the range (np.max - np.min)
np.sum  Compute sum of elements</code></pre><div class="ide code-starter clearfix"><pre><code>x = np.array([0,1,2,3,4,5,6])
print(np.sum(x))
print(x + 2*x)</code></pre></div><p class="new">Also, most aggregates have a NaN-safe counterpart that computes the result 
while ignoring missing values, which are marked by the np.NaN value.</p><div class="ide code-starter clearfix"><pre><code>x = np.array([1,2,0,3,6,5,np.NaN,4])
print(np.nansum(x))
print(np.nanargmin(x))
print(np.nanargmax(x))</code></pre></div><h1 class="section" id="section8">2D and beyond</h1><p class="new">We mentioned a few times that the power of Numpy comes into play as soon as 
we extend beyond a simple series of numbers (i.e. a 1 dimensional array).</p><img alt="ds5.png" class="center" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/p4ds/ds/numpy1/html/ds5.png"/><p class="new">Using NumPy to manage 2 dimensional arrays is just as easy:</p><div class="ide code-starter clearfix"><pre><code>data = np.array([
  [1,  2, 3], 
  [4,  5, 6],  
  [7,  8, 9],  
  [10,11,12]]) 
  
print(data)</code></pre></div><p class="new"><code>np.ones</code>, <code>np.zeros</code>, and <code>np.random</code> work in multiple dimensions as well:</p><img alt="ds6.png" class="center" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/p4ds/ds/numpy1/html/ds6.png"/><p class="new">We will explore higher dimensions in the next lesson.</p><h1 class="section" id="section9">Size, Dimension, Shape</h1><p class="new">The method <code>size</code> returns the number of elements, and <code>ndim</code> returns the number 
of dimensions.  Try to find out what the <code>len</code> function returns on data:</p><div class="ide code-starter clearfix"><pre><code>print(data.size, data.ndim)</code></pre></div><p class="new">You can ask a Numpy 2D array its shape as well:</p><pre><code>print(data.shape)  # 4 rows, 3 columns</code></pre><p class="new">Each element of the returned tuple describes each dimension.</p><h1 class="section" id="section10">Indexing</h1><p class="new">Standard array/list indexing works as well:</p><div class="ide code-starter clearfix"><pre><code>one_d = np.array([1,2,3])
two_d = np.array([[1,2,3],[4,5,6],[7,8,9]])
print(one_d[1])
print(two_d[1])
print(two_d[1][1])</code></pre></div><h1 class="section" id="section11">Slicing And Dicing</h1><p class="new">Just as with Python lists you can slice NumPy arrays using the same syntax:</p><pre><code>[start : stop : step]</code></pre><div class="ide code-starter clearfix"><pre><code>x = np.arange(100).reshape(20,5)
print("Rows 2,3,4 ", x[2:5])

# Advanced slicing
print("First 5 rows\n", x[:5])
print("Row 18 to the end\n", x[18:])
print("Last 5 rows\n", x[-5:])
print("Reverse the rows\n", x[::-1])</code></pre></div><p class="new">However, for multiple dimensions, this syntax is extended to each 
dimension -- where each dimension is separated by a comma:</p><div class="ide code-starter clearfix"><pre><code>data = np.arange(1,21).reshape(4,5)
print(data)
print(data[:2  , :3])     # two rows, three columns
print(data[:3:2, :4:2])   # ???</code></pre></div><p class="new">So it's incredibly easy to extract an attribute (column) from all the rows in a dataset:</p><pre><code>print(data[:, 2]) # all rows, column '3'</code></pre><hr/><p class="new">Do <strong>not go past</strong> this point unless you understand what is happening.  Most of
 the lesson (and NumPy and Pandas) depends on understanding this compact syntax.</p><img alt="ds7.png" class="center iw600 ma-4" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/p4ds/ds/numpy1/html/ds7.png"/><br/><img alt="ds8.png" class="center iw600 ma-4" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/p4ds/ds/numpy1/html/ds8.png"/><br/><img alt="ds9.png" class="center iw600 ma-4" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/p4ds/ds/numpy1/html/ds9.png"/><h1 class="section" id="section12">Operator Indirection and Masking</h1><p class="new">What's even more powerful is that you can use the result of one NumPy array 
to extract values from another NumPy array.  In this example, we build an 
array of the integers that represents an index for values we want to extract. 
In the example below, we will extract the values at index 0, 5, and 9:</p><div class="ide code-starter clearfix"><pre><code>np_num = np.arange(0,100,10) 
# [0,10,20,30,40,50,..,90]

np_idx = np.array([0,5,9])   
# want first sixth and last 

print(np_num[ np_idx ])      
# [0, 50, 90]</code></pre></div><p class="new">If the index array contains boolean values, we extract the values whose index value 
is True. This is called a <strong>boolean mask</strong>. For example the following code 
creates a boolean array (from a Python List) that is filled with alternating 
<code>True, False</code> values (10 total):</p><pre><code>np_num  = np.arange(0,10)
np_bool = np.array([True, False]*5)
print(type(np_bool))</code></pre><p class="new">Here is a quick illustration of the above situation</p><pre><code>[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]  np_num
[T, F, T, F, T, F, T, F, T, F]  np_bool</code></pre><p class="new">We can then use this boolean mask to extract the values inside of <code>np_num</code>. 
Those values that are <code>True</code> inside <code>np_bool</code> will "filter" those in <code>np_num</code>:</p><div class="ide code-starter clearfix"><pre><code>np_num  = np.arange(0,10)
np_bool = np.array([True, False]*5)
np_wow  = np_num[np_bool]
print(np_wow)</code></pre></div><p class="new">The above situation:</p><pre><code>[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]  np_num
[T, F, T, F, T, F, T, F, T, F]  np_bool
--------------------------------
[0,    2,    4,    6,    8   ]  np_wow</code></pre><h2 id="now-for-the-fun">Now for the Fun</h2><p class="new">With that background information, we can easily create boolean arrays based 
on a condition and then use that array to extract the values:</p><div class="ide code-starter clearfix"><pre><code>np_num  = np.arange(0,10)
np_bool = np_num &lt; 5
print(np_num[np_bool])</code></pre></div><p class="new">That's an efficient way to get all the values inside <code>np_num</code> whose value is 
less than five. We can even combine the syntax to make for a reading friendly version:</p><pre><code>print(np_num[np_num&lt;5])</code></pre><p class="new">See the appendix for yet another (very useful) way to mask with Numpy.</p><h1 class="section" id="section13">Working with Strings</h1><p class="new">Even though Numpy is meant for heavy duty processing of numeric data, it also can 
be used to process strings, unicode, and character data (<a href="https://docs.scipy.org/doc/numpy/reference/routines.char.html" target="_blank">https://docs.scipy.org/doc/numpy/reference/routines.char.html</a>).</p><div class="ide code-starter clearfix"><pre><code>fruit = np.array("apples,pears,bananas,oranges".split(','))
print(fruit)
lens = np.char.str_len(fruit)
print(lens)</code></pre></div><p class="new">You can do masking as well:</p><pre><code>short = (lens &lt;= 5)
print(fruit[short])
print(np.char.count(fruit, "a"))</code></pre><p class="new">The function <code>np.char.count</code> works with multiple dimensions as well:</p><pre><code>data = ["apple pear pizza",
        "apple lemon bagel milk lemon",
        "pizza soda apple"]
trips = np.array(data)

print(np.char.count(trips, 'apple'))
print(np.char.count(trips, 'lemon'))
print(np.char.count(trips, 'pizza'))</code></pre><div class="ide code-starter clearfix"><pre><code></code></pre></div><p class="new">You should see the following output:</p><pre><code>[1 1 1] &lt;= bought an apple on all three trips
[0 2 0] &lt;= bought 2 lemons on trip 2
[1 0 1] &lt;= bought a pizza on trip 1 and trip 3</code></pre><h2 id="a-word-on-words">A word on words</h2><p class="new">All of the following will be used at times when dealing with numPy data: lists, 
arrays, vectors, columns, rows, matrices (and a few others). In general, a list, 
an array, a vector all describe a one dimensional ordered set of numbers. The 
word vector could mean a row vector or a column vector. Both are components 
inside a matrix -- which is usually a 2 dimensional grid of values:</p><img alt="ds10.png" class="center iw600 ma-4" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/p4ds/ds/numpy1/html/ds10.png"/><div class="font-sans container mt-1 mb-4 "><p>üéóBefore you go, you should <strong>know</strong>:</p><div class="w-2/3 md:w-2/3"><div class="shadow-md"><div class="tab overflow-hidden border-t bg-green-200"><input class="absolute opacity-0" id="tab-multi-0" name="tabs" type="checkbox"/><label class="block p-3 leading-normal cursor-pointer" for="tab-multi-0"><span> numpy array creation </span></label><div class="tab-content overflow-hidden border-l-2 bg-orange-300 border-indigo-500 leading-normal"><p class="p-3">No Answer</p></div></div><div class="tab overflow-hidden border-t bg-green-200"><input class="absolute opacity-0" id="tab-multi-1" name="tabs" type="checkbox"/><label class="block p-3 leading-normal cursor-pointer" for="tab-multi-1"><span> how to index an array </span></label><div class="tab-content overflow-hidden border-l-2 bg-orange-300 border-indigo-500 leading-normal"><p class="p-3">No Answer</p></div></div><div class="tab overflow-hidden border-t bg-green-200"><input class="absolute opacity-0" id="tab-multi-2" name="tabs" type="checkbox"/><label class="block p-3 leading-normal cursor-pointer" for="tab-multi-2"><span> how operators (e.g. +, -, *) work on numpy arrays </span></label><div class="tab-content overflow-hidden border-l-2 bg-orange-300 border-indigo-500 leading-normal"><p class="p-3">No Answer</p></div></div><div class="tab overflow-hidden border-t bg-green-200"><input class="absolute opacity-0" id="tab-multi-3" name="tabs" type="checkbox"/><label class="block p-3 leading-normal cursor-pointer" for="tab-multi-3"><span> how masking works </span></label><div class="tab-content overflow-hidden border-l-2 bg-orange-300 border-indigo-500 leading-normal"><p class="p-3">No Answer</p></div></div></div></div></div><h1 class="section" id="section14">Lesson Assignment</h1><img alt="moe.png" class="float-left iw600 border2 mr-3" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/p4ds/ds/numpy1/html/moe.png"/><p class="new">One of the great outcomes of learning Python, Numpy, Matplotlib, (and soon Pandas) 
is that you can do everything (and more) using your new found power. What's 
great is once you have a workflow (i.e. pipeline) that moves data from a raw 
source to information (and action), is that if the data ever changes or 
gets updated (and it usually does), re-running the whole pipeline is SUPER easy. </p><p class="new">This lesson is one of the first steps to getting Numpy to do some interesting 
analysis on a simple dataset.</p><p class="new">You can use Excel even (if you want) to confirm your answers but the objective 
is start understanding how to write programs that you might have used Excel 
to do at one point.</p><h2 id="simple-data-analysis">Simple Data Analysis</h2><p class="new">The lesson comes with its own dataset, <code>data.csv</code>. It is the amount spent on 
various merchants. You will use Numpy to analyize the data.</p><p class="new">Take a look at the tab named data.csv. It's a semi-colon separated data 
file that shows spending around campus town.  </p><div class="ide code-starter clearfix"><pre><code>def display_data():
    import LessonUtil as Util
    p = Util.path_for_data('data.csv')
    with open(p, 'r') as fd:
       data = fd.read()
       print(data)</code></pre></div><p class="new">Numpy provides a utility function named <code>genfromtxt</code> that will read in data 
from a file (or url) and return a structured array that is ready for analysis. 
We can read this file into a structured array via <code>np.genfromtxt</code> and then
 perform some basic analysis on the returned numPy array.  </p><p class="new">Don't worry, we won't spend too much on the numPy function <code>np.genfromtxt</code> since 
we will be using Pandas very soon that adds more functionality on top of numPy.</p><p class="new">All of the questions will be from analyzing the data found in data.csv. You will 
be passed a Numpy structured data array. Each question will ask you to 
manipulate the data and return a result.</p><ul><li>All the information to solve these is given in this lesson</li><li>You should solve these by using only the Numpy library</li><li>Avoid converting to pure Python to solve these</li><li>There's no need for loops, regular expressions, etc</li></ul><p class="new">Each can be solved using Numpy operators and functions given in the lesson. Many of 
these answers will use <code>np.sum</code> on an <code>np.array</code> if you didn't read each of 
the sections and didn't run each of the samples, it will be impossible (unless 
you already know NumPy) to answer these questions.</p><h2 id="q0">q0</h2><h3 id="find-the-total-amount-spent-on-all-merchants">Find the total amount spent on all merchants.</h3><p class="new">answer: already done for you!</p><div class="ide code-starter clearfix"><pre><code>import numpy as np
def q0(data):
  return np.sum(data['Total'])</code></pre></div><p class="new">You can test it like this:</p><pre><code>def test_q0():
    import LessonUtil as Util
    data = util.read_data()
    print(q0(data))</code></pre><p class="new">In order to get a feel for the result of each stage, just print each step:</p><pre><code>    sub_set = data['Total']
    print(sub_set)
    total = np.sum(sub_set)
    print(total)</code></pre><h2 id="q1-">q1: </h2><h3 id="how-many-transactions-were-on-restaurants">How many transactions were on Restaurants?</h3><div class="ide code-starter clearfix"><pre><code>def q1(data): 
  return None</code></pre></div><h2 id="q2-">q2: </h2><h3 id="find-the-total-spent-on-restaurants">Find the total spent on Restaurants</h3><p class="new">Hint: you will want to solve this in two parts:</p><ul><li>First get the sub set that is restaurants (re-read the section on indirection).</li><li>Second, you can do something similar as in q0.</li></ul><div class="ide code-starter clearfix"><pre><code></code></pre></div><h2 id="q3-">q3: </h2><h3 id="how-much-was-spent-on-taxes">How much was spent on taxes?</h3><div class="ide code-starter clearfix"><pre><code></code></pre></div><h2 id="q4-">q4: </h2><h3 id="how-much-was-spent-on-taxes-for-groceries">How much was spent on taxes for Groceries?</h3><div class="ide code-starter clearfix"><pre><code></code></pre></div><h2 id="q5-">q5: </h2><h3 id="what-was-the-mean-ie-average-of-all-transactions">What was the mean (i.e. average) of all transactions?</h3><div class="ide code-starter clearfix"><pre><code></code></pre></div><h2 id="q6-">q6: </h2><h3 id="what-was-the-mean-ie-average-of-all-transactions-whose-total-was-under-300">What was the mean (i.e. average) of all transactions whose total was under 3.00?</h3><div class="ide code-starter clearfix"><pre><code></code></pre></div><h2 id="q7-">q7: </h2><h3 id="what-is-the-sum-of-price-on-transactions-where-price-was-a-whole-dollar-">What is the sum of price on transactions where price was a whole dollar </h3><p class="new">amount (i.e. cents was 0) ?</p><p class="new">Hints:</p><ul><li>Think about the math needed to solve this</li><li>You want values that are whole dollars (4.00, 23.00, etc)</li><li>The mod operator could be useful (but not mandatory)</li><li>Don't use Python to post process the data. A good Numpy mask will do</li></ul><div class="ide code-starter clearfix"><pre><code></code></pre></div><h2 id="q8-">q8: </h2><h3 id="how-much-was-spent-total-on-merchants-whose-name-is-less-than-7-characters-long">How much was spent total on Merchants whose name is less than 7 characters long?</h3><div class="ide code-starter clearfix"><pre><code></code></pre></div><h2 id="q9-">q9: </h2><h3 id="total-number-of-transactions-where-the-merchants-name-had-the-word-cafe-in-it">Total number of transactions where the Merchant's name had the word 'Caf√©' in it?</h3><div class="ide code-starter clearfix"><pre><code></code></pre></div><h2 id="q10-">q10: </h2><h3 id="how-many-merchants-have-the-word-cafe-in-them-ie-unique-set-merchants">How many Merchants have the word 'Caf√©' in them? (i.e. unique set Merchants)?</h3><div class="ide code-starter clearfix"><pre><code></code></pre></div><h1>Test and Submit</h1><p>Once you have finished, you can download your code (via <code>ide.tester</code>) and upload that file to Gradescope (find lesson with tag <strong>DS-Numpy1</strong>).</p><div class="my-4"><pre><code><strong># to list the tests available</strong><br/>print(ide.tester.list_tests())<br/><strong># to perform a specific test</strong><br/>print(ide.tester.test_functionality('name of test'))<br/><strong># to test your code (either works)</strong><br/>print(ide.tester.test_notebook())<br/>print(ide.tester.test_notebook(verbose=True))<br/><strong># to prepare and download your code</strong><br/>ide.tester.download_solution()</code></pre></div><div class="lesson-footer flex bg-gray-200 justify-center"><div class="lesson-footer-card displaycard bg-blue-200 border-t border-gray-400 max-w-2xl rounded overflow-hidden shadow-lg"><div class="px-6 py-4"><div class="title-text text-center font-bold text-xl">Numerical Analysis with NumPy</div><p class="text-center text-gray-800 text-xl">Python's super library</p><div class="text-center mt-6 text-xl"><i aria-hidden="true" class="fas fa-tags"></i> any questions on Piazza with <span class="font-bold">DS-Numpy1</span></div><div class="text-gray-700 text-base">¬†</div><div></div><div class="text-gray-700 text-base">References and Additional Readings</div><div class="text-xs p-2 border border-solid border-gray-500 bg-gray-300"> <div class="text-gray-700 px-4 m-2">‚Ä¢ <!-- --> <a href="https://hackernoon.com/introduction-to-numpy-1-an-absolute-beginners-guide-to-machine-learning-and-data-science-5d87f13f0d51" target="_blank">https://hackernoon.com/introduction-to-numpy-1-an-absolute-beginners-guide-to-machine-learning-and-data-science-5d87f13f0d51</a></div><div class="text-gray-700 px-4 m-2">‚Ä¢ <!-- --> <a href="https://s3.amazonaws.com/assets.datacamp.com/blog_assets/Numpy_Python_Cheat_Sheet.pdf" target="_blank">https://s3.amazonaws.com/assets.datacamp.com/blog_assets/Numpy_Python_Cheat_Sheet.pdf</a></div><div class="text-gray-700 px-4 m-2">‚Ä¢ <!-- --> <a href="http://jalammar.github.io/visual-numpy" target="_blank">http://jalammar.github.io/visual-numpy</a></div><div class="text-gray-700 px-4 m-2">‚Ä¢ <!-- --> <a href="https://storage.googleapis.com/uicourse/pdfs/Numpy.pdf" target="_blank">https://storage.googleapis.com/uicourse/pdfs/Numpy.pdf</a></div></div><div class="flex mt-4 border-t border-solid border-gray-500 justify-around bg-gray-200"><div class="text-gray-700 text-center px-4 m-2 text-sm">üêç¬†¬†4 D.S.</div><div class="text-gray-700 text-center px-4 m-2 text-sm"><strong>Version:</strong> <!-- -->SP21</div></div><div class="text-gray-700 mt-2 text-center text-sm font-bold">All Rights Reserved Michael Haberman</div><div class="text-gray-700 text-center text-sm">Do not distribute this notebook</div></div></div></div><div>¬†</div><div class="ide code-starter clearfix"><pre><code># print(ide.tester.test_notebook()) 
# print(ide.tester.test_notebook(verbose=True)) 

# once you are ready -- run this 
# ide.tester.download_solution() 
</code></pre></div><h1 class="section" id="section15">Appendix: (but still very useful)</h1><p class="new">Here's yet another way to use masking in Numpy.</p><h2 id="using-the-where-clause">Using the <code>Where</code> Clause</h2><p class="new">Numpy allows similar masking using the where function.<br/>You pass in a condition to where function to get back an array that can 
be used for masking. For example, let's find all elements of an array whose 
value is 5:</p><p class="new">Here's the code to generate an array of 10 numbers:</p><pre><code>np.random.seed(101)
values = np.random.randint(0,7, (10,))
print(values)</code></pre><p class="new">Now let's create a condition:</p><pre><code>mask = values == 5
print(mask)</code></pre><p class="new">And finally pass that condition/mask to the where function:</p><pre><code>indices = np.where(mask)
print(len(indices), indices)</code></pre><p class="new">The <code>where</code> function returns a set of tuples.  Each tuple is an index.
You can iterate over the first element of the tuple to get the values:</p><pre><code>for idx in range(0, len(indices)):
  i = indices[idx]
  print(values[i]) # should be a 5!</code></pre><div class="ide code-starter clearfix"><pre><code></code></pre></div><h2 id="one-more-time-in-2d">One more time, in 2D</h2><p class="new">Let's do the same process, but now with a two dimensional array:</p><pre><code>np.random.seed(55)
values = np.random.randint(0,7, (2,3))
print(values)

mask = values == 5
print(mask)

rows, cols = np.where(mask)
print(rows)
print(cols)
# NOTE len(rows) == len(cols)</code></pre><p class="new">A few important notes:</p><ul><li><code>np.where</code> still returns a tuple, but we unravel (assign the different parts of) 
the tuple to different variables</li><li>since values is 2D, <code>np.where</code> will return indices for both rows and columns</li></ul><p class="new">We can now iterate over these indices:</p><pre><code>for idx in range(0, len(rows)): 
  r = rows[idx]
  c = cols[idx]
  print(values[r][c]) # should be a 5!</code></pre><div class="ide code-starter clearfix"><pre><code></code></pre></div><p class="new">That's a lot to learn. Be sure you understand the different parts of all of this. 
You don't need to memorize anything, just understand how numpy works at the syntax level.</p></div></div></body></html>