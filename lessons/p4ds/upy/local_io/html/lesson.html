<!DOCTYPE html><html lang='en'><head><title>Local I/O</title><meta charset="utf-8"><style>/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}h1{font-size:2em;margin:.67em 0}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}strong{font-weight:bolder}code{font-family:monospace,monospace;font-size:1em}img{border-style:none}input{font-family:inherit;font-size:100%;line-height:1.15;margin:0}input{overflow:visible}[type=checkbox]{box-sizing:border-box;padding:0}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}blockquote,h1,h2,h3,p,pre{margin:0}ul{list-style:none;margin:0;padding:0}html{font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e2e8f0}img{border-style:solid}input:-ms-input-placeholder{color:#a0aec0}input::-ms-input-placeholder{color:#a0aec0}input::-moz-placeholder{color:#a0aec0}h1,h2,h3{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}input{padding:0;line-height:inherit;color:inherit}code,pre{font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}img{display:block;vertical-align:middle}img{max-width:100%;height:auto}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}.bg-gray-200{--bg-opacity:1;background-color:#edf2f7;background-color:rgba(237,242,247,var(--bg-opacity))}.bg-gray-300{--bg-opacity:1;background-color:#e2e8f0;background-color:rgba(226,232,240,var(--bg-opacity))}.bg-orange-300{--bg-opacity:1;background-color:#fbd38d;background-color:rgba(251,211,141,var(--bg-opacity))}.bg-green-200{--bg-opacity:1;background-color:#c6f6d5;background-color:rgba(198,246,213,var(--bg-opacity))}.bg-blue-200{--bg-opacity:1;background-color:#bee3f8;background-color:rgba(190,227,248,var(--bg-opacity))}.bg-blue-300{--bg-opacity:1;background-color:#90cdf4;background-color:rgba(144,205,244,var(--bg-opacity))}.border-gray-400{--border-opacity:1;border-color:#cbd5e0;border-color:rgba(203,213,224,var(--border-opacity))}.border-gray-500{--border-opacity:1;border-color:#a0aec0;border-color:rgba(160,174,192,var(--border-opacity))}.border-indigo-500{--border-opacity:1;border-color:#667eea;border-color:rgba(102,126,234,var(--border-opacity))}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.border-solid{border-style:solid}.border{border-width:1px}.border-l-2{border-left-width:2px}.border-t{border-top-width:1px}.cursor-pointer{cursor:pointer}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.justify-center{justify-content:center}.justify-around{justify-content:space-around}.float-left{float:left}.clearfix:after{content:"";display:table;clear:both}.font-sans{font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}.font-serif{font-family:Georgia,Cambria,"Times New Roman",Times,serif}.font-semibold{font-weight:600}.font-bold{font-weight:700}.h-64{height:16rem}.text-xs{font-size:.75rem}.text-sm{font-size:.875rem}.text-base{font-size:1rem}.text-xl{font-size:1.25rem}.leading-none{line-height:1}.leading-normal{line-height:1.5}.m-2{margin:.5rem}.my-4{margin-top:1rem;margin-bottom:1rem}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mr-2{margin-right:.5rem}.mb-2{margin-bottom:.5rem}.mr-3{margin-right:.75rem}.mb-3{margin-bottom:.75rem}.mt-4{margin-top:1rem}.mb-4{margin-bottom:1rem}.mt-6{margin-top:1.5rem}.max-w-sm{max-width:24rem}.max-w-2xl{max-width:42rem}.object-contain{-o-object-fit:contain;object-fit:contain}.opacity-0{opacity:0}.overflow-hidden{overflow:hidden}.p-1{padding:.25rem}.p-2{padding:.5rem}.p-3{padding:.75rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.pl-3{padding-left:.75rem}.absolute{position:absolute}.shadow-md{box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06)}.shadow-lg{box-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -2px rgba(0,0,0,.05)}.shadow-inner{box-shadow:inset 0 2px 4px 0 rgba(0,0,0,.06)}.text-left{text-align:left}.text-center{text-align:center}.text-black{--text-opacity:1;color:#000;color:rgba(0,0,0,var(--text-opacity))}.text-gray-700{--text-opacity:1;color:#4a5568;color:rgba(74,85,104,var(--text-opacity))}.text-gray-800{--text-opacity:1;color:#2d3748;color:rgba(45,55,72,var(--text-opacity))}.whitespace-no-wrap{white-space:nowrap}.w-1\/2{width:50%}.w-2\/3{width:66.666667%}.w-full{width:100%}@media (min-width:768px){.md\:w-2\/3{width:66.666667%}}.text-tiny{font-size:.5rem!important}body{color:#000!important;font-size:1.25rem!important}.main-content{max-width:900px}.lesson{padding-left:15px!important;padding-right:10px!important;--bg-opacity:1;background-color:#edf2f7;background-color:rgba(237,242,247,var(--bg-opacity))}.main-content,html{font-family:Arial,Georgia,Verdana,"Times New Roman"!important}.lesson-footer-card,.lesson-overview-card{font-family:"Times New Roman"!important}blockquote em:first-child{font-family:Times!important;font-size:1.35em;margin-right:10px}blockquote em:first-child:after{content:":"}.lesson-footer{margin-top:50px;margin-top:20px}.lesson ul{list-style-position:inside;list-style-type:none;margin-left:1em}.lesson ul li{padding-left:1em;padding-right:5px}.lesson ul li::before{content:"•";padding-right:5px}span{white-space:nowrap}p.new{padding-top:0;padding-bottom:.5em}p.new+p{padding-top:.5em}h1,h2,h3{font-weight:700;margin-top:.25em!important;margin-bottom:.05em!important;font-family:Georgia,Cambria,"Times New Roman",Times,serif!important}h1{font-size:2em!important;clear:both;color:#000!important}div+h1,h2{margin-top:0!important}h2{margin-top:.5em!important;font-size:1.5em!important;clear:both;color:#8b0000!important}h3{font-size:1.25em!important;clear:both;color:#006400!important}ul{margin-bottom:30px}p.new a{text-decoration:underline}.lesson a{text-decoration:underline;color:#00f}.title-text{font-size:2rem}blockquote{font-size:1em;background:#f9f9f9;border-left:10px solid #ccc;margin:.5em 10px;padding:.5em 10px;border-left-color:#ffcd69;border-right-color:#f6ba59;quotes:"\201C""\201D""\2018""\2019"}blockquote:before{color:#ccc;content:open-quote;font-size:4em;line-height:.1em;margin-right:.25em;vertical-align:-.4em}blockquote:after{color:#ccc;content:no-close-quote}blockquote p{display:inline}.shadow-lg{box-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -2px rgba(0,0,0,.5)}img.center{-o-object-position:center;object-position:center;margin-left:auto;margin-right:auto}img.border{border:1px solid #021a40;margin-top:.5rem;margin-bottom:.75rem}code{font-size:smaller}pre code{font-size:15px}pre code:not(.line-number){background:#f4f4f4;font-family:monospace;font-size:15px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default;touch-action:none;-webkit-touch-callout:none;-webkit-tap-highlight-color:transparent;clear:both;border:1px solid #ddd;color:#666;page-break-inside:avoid;display:block;min-width:840px;max-width:840px;overflow:scroll;line-height:1.6;margin-bottom:1.6em;padding:1em 1.5em;-moz-tab-size:2;-o-tab-size:2;tab-size:2;word-wrap:break-word;white-space:pre-wrap;border-left:3px solid #f36d33}div.code-starter>pre code{border-left:3px solid #fdff44!important;background-image:radial-gradient(rgba(0,150,0,.75),#000 120%);color:#fff;font:.9rem Inconsolata,monospace}div.code-starter>pre code::after{content:"\a$_"}.tab{font-size:1rem;border-color:#8c6728}.tab-content{max-height:0;max-width:100%;transition:max-height .35s}.tab input:checked~.tab-content{max-height:100vh}.tab input:checked+label{padding:1rem;border-left-width:2px;border-color:#6574cd;background-color:#f8fafc;color:#6574cd}.tab label::after{float:right;right:0;top:0;display:block;width:1em;height:1.5em;line-height:1.5;font-size:1rem;text-align:center;transition:all .35s}.tab input[type=checkbox]+label::after{content:"+";font-weight:700;border-width:1px;border-radius:9999px;border-color:#8c6728}.tab input[type=checkbox]:checked+label::after{transform:rotate(315deg);background-color:#6574cd;color:#f8fafc}</style>
<script src="https://kit.fontawesome.com/7efc4bcee2.js" crossOrigin="anonymous"></script>
<script>
    let stateCheck = setInterval(function(){
      if (document.readyState === 'complete') {
        clearInterval(stateCheck);
        let s1 = document.getElementById('start');
        // console.log('doc is ready', s1);
        if (s1) {
           s1.setAttribute('tabindex', '-1');
           s1.focus(); 
           s1.scrollIntoView({behavior: 'smooth'}); 
           setTimeout(function(){s1.blur()}, 500);
           // console.log('focus set');
        }
      }
    }, 200);
    </script>
</head><body class="lesson"><div class="main-content lesson bg-gray-200 text-black p-1 pl-3 font-serif"><div class="md-inner">
<div id="start" class="section">&nbsp;</div><h1 class="overview"></h1><div class="lesson-overview bg-gray-200 flex justify-center"><div class="text-center px-4 py-2 m-2"><div class="lesson-overview-card displaycard bg-blue-200 max-w-sm rounded overflow-hidden shadow-lg"><div> </div><img alt="Text" class="object-contain h-64 w-full" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/p4ds/upy/local_io/html/upy-sm.png"/><div class="px-6 py-4"><div class="title-text text-center leading-none font-bold text-xl">Local I/O</div><p class="text-center mt-2 text-gray-800 text-xl">Input and Output</p><div class="text-gray-700 text-base"> </div><div class="text-center mb-3"><span class="inline-block bg-gray-300 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2">#info490</span><span class="inline-block bg-gray-300 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2">#python</span></div><div class="flex border-t border-solid border-gray-500 shadow-inner justify-around bg-blue-300"><div class="text-gray-700 text-center px-4 m-2 text-sm"><span class="whitespace-no-wrap">🐍  4 D.S.</span></div><div class="text-gray-700 text-center px-4 m-2 text-sm"><span class="whitespace-no-wrap"><strong>Version:</strong> <!-- -->SP21</span></div></div><div class="text-gray-700 mt-1 text-center text-tiny">All Rights Reserved</div></div></div></div><div class="text-center px-4 py-2 m-2 w-1/2"><div class="displaycard bg-gray-200 max-w-sm rounded overflow-hidden shadow-lg"><div class="px-6 py-4 text-left"><div class="text-center font-bold text-xl">Local I/O<br/><div><span>prerequisites</span><div class="text-center text-xs mb-2">(start only after finishing)</div><p class="max-w-sm text-gray-800 text-sm">⦿ <strong>bootcamp</strong></p></div></div></div><div class="px-6 py-4 text-left text-gray-800"><div class="text-center font-bold text-xl">Colab Notes</div><p class="max-w-sm text-sm">1. <strong>Copy</strong> this notebook <img alt="copy2drive.png" class="inline-block" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/p4ds/upy/local_io/html/copy2drive.png"/></p><p class="max-w-sm text-sm">2. <strong>Update</strong> the <strong><code>NET_ID</code></strong> in the notebook</p><p class="max-w-sm text-gray-800 text-sm">3. <strong>Hit ▶️ </strong> to install the INFO 490 IDE</p><div class="text-center font-bold text-xl"> </div><div class="text-center font-bold text-xl">Jupyter/PyCharm Notes</div><p class="max-w-sm text-gray-800 text-sm text-left">The testing framework does <strong>not work</strong> (at this time) for Jupyter  notebooks or local code development.</p></div></div></div></div><h1 class="section" id="section1">Local I/O </h1><h2 id="input-and-output">Input and Output</h2><p class="new">Perhaps you already know that I/O (pronounced eye-oh) is just shorthand for 
Input/Output or how data/information is read or written by the computer. 
You have already been using it, but now you will learn how to manipulate 
different I/O streams (think of a stream as a channel for communication) to access data.</p><p class="new">Up until now you have used variables to set the data directly:</p><pre><code>my_list = [1,2,3,"apples"]</code></pre><p class="new">However, at some point, you will want to read data from either the user or 
from a local file.  When you install Python on your laptop the idea of 
reading a 'local' file will mean reading a file that is on your laptop. 
However, since you are running Python code on one of repl.it's machines (which 
is actually run on Google's hardware) or a colab notebook, 'local' really 
means the computer that is hosting the VM (virtual machine -- a program that 
has access to a subset of the host's actual resources).  </p><h2 id="standard-input">Standard Input</h2><p class="new">The way to read from the user's keyboard (or prompt the user to enter input) 
is with the <code>input</code> function:</p><div class="ide code-starter clearfix"><pre><code>def io_example():
    data = input("Please enter something, anything")
    print("You entered ", data)
    
# comment this out (so it doesn't run in the grader) 
# after you try it out
io_example()</code></pre></div><blockquote><p class="new"><strong><em>Coder's Log</em></strong>  In Python version 2, The <code>input</code> function, actually
evaluates the data that you typed in via <code>input()</code>. So if you typed in <code>[x*x for x in range(0,5)]</code>, 
the input function would evaluate that input and return: <code>[0, 1, 4, 9, 16]</code>.
That can be a very dangerous thing -- evaluated code from a user.
The reading from the 'console' window via the keyboard is called standard 
input (i.e. <strong><code>stdin</code></strong> for short) -- it's a term from the early days of
computers. It usually means input from the keyboard.</p></blockquote><h3 id="sys-module"><code>sys</code> module</h3><p class="new">You can also use the <code>sys</code> (system) module to read from standard input (no need 
to do this unless you have a specific reason). See the <a href="https://docs.python.org/3.6/library/sys.html" target="_blank">documentation</a>
for <code>sys.stdin</code></p><pre><code>def readline_example():
    import sys
    print("enter something")
    data = sys.stdin.readline()
    print("You entered ", data)
    
readline_example()</code></pre><h2 id="standard-output">Standard Output</h2><p class="new">You have already been using Python's <code>print</code> function which writes to the 
console window or display (also called standard output and abbreviated <strong><code>stdout</code></strong>). </p><pre><code>print("Hello Python")</code></pre><p class="new">Just as you can read from <code>sys.stdin</code>, you can also write using the <code>sys</code> 
module and simulate what the print function is doing:</p><pre><code>import sys
sys.stdout.write('Hello Python')
sys.stdout.write('\n')</code></pre><div class="ide code-starter clearfix"><pre><code></code></pre></div><h3 id="n-what"><code>'\n'</code> What?</h3><p class="new">One thing you may have noticed is that the <code>print</code> function will print a 
newline (the character that forces a newline) after it is done:</p><pre><code>print("Hello Python")
print("Here we are")</code></pre><p class="new">You can tell the print function to not print the newline at the end of it:</p><pre><code>print("Hello Python", end='')
print("Here we are")</code></pre><p class="new">Essentially any control characters inside a regular Python string will 
get replaced when evaluated.  This newline character will become 
important to consider when you read and write (and parse) data. 
But it can serve as a token to separate different lines in a file.<br/>A line can be any length.</p><h2 id="standard-error">Standard Error</h2><p class="new">There's another type of output called standard error (<strong><code>stderr</code></strong> for short). 
You can think of standard error as another output stream.  It's one way to 
separate the output sent to standard out and output that is meant to bring 
attention to an error situation.  However, the default output for standard 
error is the console/display. So it's really hard to show the difference.  </p><p class="new">When you get to the lesson on learning Unix commands, you will see the power 
of being able to separate the output of a program into two streams or 
categories: normal output and errors.</p><pre><code>import sys
for x in range(0,10):
  sys.stderr.write('*')
sys.stderr.write('\n')
# will look the same in the console window (stdout)</code></pre><div class="ide code-starter clearfix"><pre><code></code></pre></div><h2 id="getting-data">Getting Data</h2><p class="new">Other than simple examples and the smallest of datasets, you will need to 
get data from some location -- either a local file, remote file, or a 
service (http web page request, SQL request, etc).  For now you will focus on 
reading and writing to <em>local</em> files. </p><img alt="ds1.png" class="float-left border mr-3" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/p4ds/upy/local_io/html/ds1.png"/><p class="new">Within the colab notebook environment, you can bring up the file browser to
 see the directories (folders) and files.  Go ahead and select the <code>sample_data</code>
 folder and double click on the <code>california_housing_test.csv</code> file.  It has
  3000 rows of data in it.  If we wanted to use that data for processing, we
   can use local IO to get it into our Python program.</p><h1 class="section" id="section2">Local File Writing</h1><p class="new">We will first <em>write</em> data to a file so you can see the data via the file
 browser and then we will read it back in.</p><p class="new">Writing to a file (very similar to reading), involves 3 basic steps.  </p><ul><li>Open the file for writing (using <code>open</code>)</li><li>Write the data (using <code>write</code> or <code>writelines</code>)</li><li>Close the file (using <code>close</code>)</li></ul><div class="ide code-starter clearfix"><pre><code>def write_demo():
    fd = open('data.csv', 'w')
    fd.write("a,b,c\n")
    fd.writelines(["1,2,3\n", "4,5,6\n", "7,8,9\n", "10,11,12\n"])
    fd.close()</code></pre></div><p class="new">Go ahead add the function call to <code>write_demo</code>, run the code and use the file 
browser to confirm that a file named 'data.csv' exists with 5 lines of 
data (1 header row, 4 rows of data).  It may take a few seconds for the
 browser to 'see' the new file.
<img alt="ds2.png" class="center border" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/p4ds/upy/local_io/html/ds2.png"/></p><h3 id="parameters-to-open">Parameters to <code>open</code></h3><p class="new">For writing, the second parameter to <code>open</code> tells how to write to the file: </p><ul><li>"w" means overwrite the file</li><li>"a" means append to the file.</li></ul><p class="new">You should visit the documentation for additional flags, but those are the
 most common and are the only ones we will use. The item returned from open
  is called the file descriptor.  It's a handle to the buffer that will be
   written to the file.  We will discuss file descriptors in detail in the
    next section.</p><p class="new">Also note, that you need to add the <code>'\n'</code> newline character if you want the file 
to have line feed\carriage return (words from typewriter days) -- so each line 
will appear on a new line in the file.</p><h1 class="section" id="section3">Local File Reading</h1><p class="new">When you want to read a file that has data in it, it's usually a three step process:</p><ul><li>Open the file for reading</li><li>Read the data (either in chunks or in its entirety)</li><li>Close the file</li></ul><h2 id="opening-a-file">Opening a File</h2><p class="new">We will use the open function which returns a file I/O object.</p><pre><code>fd = open('data.csv', 'r')</code></pre><p class="new">Conventionally, the object returned by open is usually referred to as a <strong>file descriptor</strong> 
(sometimes referred to <code>fd</code> for short) or a file. The second parameter tells the <code>open</code> 
function, how you will be using the returned file (i.e. for reading, writing). 
You can even specify if you want to read or write the data in 'binary' mode. 
That usually means you are interested in encoding and decoding the raw bytes 
that make up the file directly.  You will not be doing that in this class.</p><h2 id="reading-a-file">Reading a File</h2><p class="new">Once you have a file object, you can then read from it.  You can request to 
read from the file incrementally or to read all the data at once.<br/>The two main methods on the file object are <code>readline</code> (which reads a single line) 
and <code>read</code> (which reads as much as possible).  </p><div class="ide code-starter clearfix"><pre><code>fd = open('data.csv', 'r')
print("1--&gt;",fd.readline())
print("2--&gt;",fd.read())</code></pre></div><p class="new">If you are just interested in the raw contents of the file, use <code>read</code>.</p><h3 id="readlines">readlines</h3><p class="new">There is also a <code>readlines</code> method that returns all the lines from the 
file into a list:</p><pre><code>fd = open('data.csv', 'r')
lines = fd.readlines()
print("read", len(lines), "lines")</code></pre><p class="new">One important note is that <code>readlines</code> method KEEPS the <code>\n</code> (the newline) 
character in the returned lines.</p><p class="new">Note that you could simulate the same using the <code>split</code> method</p><pre><code>fd = open('data.csv', 'r')
lines = fd.read().split('\n')
print("read", len(lines), "lines")</code></pre><h2 id="text-to-numbers">Text to Numbers</h2><p class="new">One thing to note and remember is that even if a file is filled with numbers, 
the read functions will treat the contents as text.  You will need to 
convert it if the contents of the file will be processed differently.</p><h2 id="too-large-to-hold">Too large to hold</h2><p class="new">For really large files, you won't be able to read ALL the data --- you may 
run out of memory to do that.  However, for this class, you will not run 
into that problem (yet).  However you should be aware of a few methods that 
you can use to determine if you read all the data.  The <code>os</code> module provides a 
way to get the size of a file (using the path object)</p><pre><code>import os
size = os.path.getsize('data.csv')</code></pre><p class="new">The file object also has a <code>tell</code> method that returns the number of bytes 
it has read (you can also think of it as the current position of the where 
the next read will take place).</p><pre><code>fd = open('data.csv', 'r')
data = fd.read()
print(fd.tell())</code></pre><p class="new">If you compare the result of <code>tell</code> to the size, you will then know if 
there's more data to be read:</p><pre><code>import os
size = os.path.getsize('data.csv')</code></pre><pre><code>fd = open('data.csv', 'r')
data = fd.read()
print("read all the data?", fd.tell() == size)</code></pre><div class="ide code-starter clearfix"><pre><code></code></pre></div><blockquote><p class="new"><strong><em>Coder's Log</em></strong>  Another useful method is <code>seek</code>.  This method allows you
to move the file pointer to a specific location in 
a file <a href="https://docs.python.org/3.6/tutorial/inputoutput.html" target="_blank">see ref</a>.
But you can use <code>fd.seek(0,2)</code>  (<code>0</code> is an offset; <code>2</code> means: goes to 
the <strong>end</strong> of the file) effectively setting the current position 
at the end of the file. You can then issue a <code>tell()</code> and find the file's length.</p></blockquote><h3 id="line-by-line">Line by Line</h3><p class="new">If memory is an issue, you can process a file line by line:</p><pre><code>fd = open('data.csv', 'r')
line = fd.readline()
while(len(line) &gt; 0):
  print(line, end='')
  line = fd.readline()</code></pre><p class="new">That sequence of code is such a common pattern that there's a Pythonic way 
to do this is as follows:</p><pre><code>def pythonic_read():
    fd = open('data.csv', 'r')
    for line in fd:
        print(line, end='')</code></pre><p class="new">Be sure to write and test it.</p><div class="ide code-starter clearfix"><pre><code></code></pre></div><h2 id="good-housekeeping">Good Housekeeping</h2><p class="new">After you are done with a file, you should close it.  For reading, it will 
clean up any resources dedicated to reading the file.  For writing, it will 
do the same but also flush any data that's in the buffer out to the file.</p><pre><code>fd.close()</code></pre><p class="new">So as a complete example of reading a file, line by line would be:</p><pre><code>fd = open('data.csv', 'r')
for line in fd:
  print(line, end='')
fd.close()</code></pre><h2 id="handling-newlines-">Handling newlines </h2><p class="new">The newline character <code>'\n'</code> is something that can trip up new programmers. 
The <code>readline</code> function will use it to determine where a new line begins but 
it will also return that character in the <code>read</code>.  You can strip it off with 
string's <code>strip</code> method (which removes preceding and trailing whitespace 
from a string):</p><pre><code>fd = open('data.csv', 'r')
line = fd.readline()
line = line.strip() # remove the newline character
print(line, end='&lt;')
fd.close()</code></pre><div class="ide code-starter clearfix"><pre><code></code></pre></div><p class="new">See how that code behaves with the <code>line = line.strip()</code> commented out.</p><h2 id="with-what-"><code>with</code> What ?</h2><p class="new">One of the issues is that if a read (or write) causes an exception or the 
processing of the data causes an error, it's possible to have an open 
file (hence a memory leak -- or memory that is unable to be reclaimed). 
So it is standard Python to wrap the <code>open</code> command inside a <code>with</code> statement. 
The <code>with</code> statement helps guard against any errors and exceptions and 
guarantees to close the file regardless if there is an error or not:</p><pre><code>with open('data.csv', 'r') as fd:
  for line in fd:
    print(line, end='')

# fd is closed at this point 
# (outside the with statement)</code></pre><h3 id="nesting-withs">Nesting <code>with</code>'s</h3><p class="new">You can even nest <code>with</code> statements:</p><pre><code>with open('data1.csv', 'r') as fd1:
  # fd1 is open at this point
  with open('data2.csv', 'r') as fd2:
    # both fd1 and fd2 are available</code></pre><p class="new">Note that you can/should still wrap your code with a <code>try/except</code> statements 
in order to provide robust error handling. The <code>with</code> statement only ensures 
the file handle gets closed.</p><h2 id="buffering">Buffering</h2><p class="new">As mentioned previously, it's possible to process a file in chunks rather than 
a complete unit. You can read the Python docs on reading and writing files. 
If you're in a situation where you want to process a file in chucks, there is 
a lot of buffering (reusing memory) capabilities to be mindful of.</p><div class="font-sans container mt-1 mb-4 "><p>🎗Before you go, you should <strong>know</strong>:</p><div class="w-2/3 md:w-2/3"><div class="shadow-md"><div class="tab overflow-hidden border-t bg-green-200"><input class="absolute opacity-0" id="tab-multi-0" name="tabs" type="checkbox"/><label class="block p-3 leading-normal cursor-pointer" for="tab-multi-0"><span> the difference between <code>stdin</code> , <code>stdout</code> , <code>stderr</code></span></label><div class="tab-content overflow-hidden border-l-2 bg-orange-300 border-indigo-500 leading-normal"><p class="p-3">No Answer</p></div></div><div class="tab overflow-hidden border-t bg-green-200"><input class="absolute opacity-0" id="tab-multi-1" name="tabs" type="checkbox"/><label class="block p-3 leading-normal cursor-pointer" for="tab-multi-1"><span> how to open a file for reading and writing </span></label><div class="tab-content overflow-hidden border-l-2 bg-orange-300 border-indigo-500 leading-normal"><p class="p-3">No Answer</p></div></div><div class="tab overflow-hidden border-t bg-green-200"><input class="absolute opacity-0" id="tab-multi-2" name="tabs" type="checkbox"/><label class="block p-3 leading-normal cursor-pointer" for="tab-multi-2"><span> how to use the <code>with</code> statement </span></label><div class="tab-content overflow-hidden border-l-2 bg-orange-300 border-indigo-500 leading-normal"><p class="p-3">No Answer</p></div></div><div class="tab overflow-hidden border-t bg-green-200"><input class="absolute opacity-0" id="tab-multi-3" name="tabs" type="checkbox"/><label class="block p-3 leading-normal cursor-pointer" for="tab-multi-3"><span> how to read a file once it's open </span></label><div class="tab-content overflow-hidden border-l-2 bg-orange-300 border-indigo-500 leading-normal"><p class="p-3">No Answer</p></div></div><div class="tab overflow-hidden border-t bg-green-200"><input class="absolute opacity-0" id="tab-multi-4" name="tabs" type="checkbox"/><label class="block p-3 leading-normal cursor-pointer" for="tab-multi-4"><span> the difference between <code>read</code> and <code>readline</code></span></label><div class="tab-content overflow-hidden border-l-2 bg-orange-300 border-indigo-500 leading-normal"><p class="p-3">No Answer</p></div></div><div class="tab overflow-hidden border-t bg-green-200"><input class="absolute opacity-0" id="tab-multi-5" name="tabs" type="checkbox"/><label class="block p-3 leading-normal cursor-pointer" for="tab-multi-5"><span> how to write contents to a file </span></label><div class="tab-content overflow-hidden border-l-2 bg-orange-300 border-indigo-500 leading-normal"><p class="p-3">No Answer</p></div></div></div></div></div><h1 class="section" id="section4">Lesson Assignment</h1><p class="new">This lesson relies heavily on both file I/O but also using strings. 
Everything you need has been shown in this and other lessons.</p><p class="new">This lesson comes with its own data file. Let's take a look. Go ahead and 
run the next code cell.</p><div class="ide code-starter clearfix"><pre><code>def print_data():
    import LessonUtil as Util
    # the LessonUtil is used to get datasets
    path_to_data = Util.path_for_data('cereal.scsv')
    
    with open(path_to_data, 'r') as fd:
        data = fd.read()
        print(data)</code></pre></div><p class="new">The file <code>cereal.scsv</code> contains the nutritional information for over 70 cereals. 
However it's in a format that is rarely used (semi-colon separated values). 
The reason it's in this format is that a few cereals have commas in their 
name (e.g. Fruit &amp; Fibre Dates, Walnuts, and Oats). There is a separate
 lesson on converting this data to a proper csv format. </p><p class="new">Also note that the first line identifies the column names (the header) 
The data starts on the second row.</p><h2 id="part-1--">Part 1:  </h2><h3 id="getting-the-column-index-">Getting the column index </h3><p class="new">Create a function named <code>get_column_index</code> that returns the index of the column.</p><p class="new">It has two parameters:</p><ul><li><code>filename_in</code> is the path to the file to read the semicolon separated data file</li><li><code>column_name</code> is the name of the column of data we are interested in</li></ul><p class="new">Restrictions:</p><ul><li>you <strong>must</strong> use <code>readlines</code></li><li>there's no need to use <code>LessonUtil</code></li></ul><p class="new">So if the file for the dataset and <code>'protein'</code> were passed it, you would return 4.</p><div class="ide code-starter clearfix"><pre><code></code></pre></div><h2 id="part-2-">Part 2 </h2><h3 id="reading-a-total-">Reading a total </h3><p class="new">Create a function named <code>find_total_for</code> that has two parameters (in this order):  </p><ul><li><code>filename_in</code> which is the path the file to read</li><li><code>column_index</code> which is the index of the column of data we are interested in (from <code>get_column_index</code>)</li></ul><p class="new"><code>find_total_for</code> will read in the file and sum up the values identified by <code>column_index</code>. </p><p class="new">Notes and Hints:</p><ul><li>only columns that have numeric values will be requested</li><li>open and read the .scsv file (i.e. <code>filename_in</code>)</li><li>parse out each line into its separate components</li><li>the function returns the sum of values for column <code>column_index</code></li></ul><div class="ide code-starter clearfix"><pre><code></code></pre></div><h2 id="part-3">Part 3</h2><h3 id="writing-files">Writing Files</h3><p class="new">Complete the definition for the following function:</p><pre><code>def write_total(filename_out, column_name, total, append):</code></pre><h3 id="notes">Notes:</h3><ul><li>the function <code>write_total</code> will write to <code>filename_out</code> the values of both <code>column_name</code> and <code>total</code> separated by a comma</li><li>the parameter <code>append</code> determines if the values should be appended to an existing file or written to a new file</li><li>each line should be in the following format: <code>column_name</code>, <code>total</code></li><li>each line ends with a newline character</li><li>the function returns <code>True</code> if no exceptions occurred; <code>False</code> otherwise</li></ul><p class="new">So </p><pre><code>write_total('data.out', 'a', 10.0, False)</code></pre><p class="new">Would <em>create</em> a file named <code>data.out</code> with the following line in it:</p><pre><code>a,10.0</code></pre><h2 id="notes-for-all-parts-">Notes for <strong><em>all</em></strong> parts: </h2><ul><li>only <code>open</code>, <code>read/readlines</code>, and <code>write/writelines</code> please</li><li><strong>DO NOT</strong> use any helper libraries (e.g. pandas, csv, etc)</li><li>once again the Python documentation on strings will be <a href="https://docs.python.org/3.6/library/stdtypes.html#string-methods" target="_blank">useful</a></li><li>you can write out the value by first converting it to a string: <code>str(value)</code></li></ul><div class="ide code-starter clearfix"><pre><code></code></pre></div><h2 id="test-your-code">Test your code!</h2><p class="new">You can use the built-in tester, but be sure things are working in the
 notebook first.  You can print out the results of your conversion first to
  make sure everything looks correct.</p><h1>Test and Submit</h1><p>Once you have finished, you can download your code (via <code>ide.tester</code>) and upload that file to Gradescope (find lesson with tag <strong>UP-LocalIO</strong>).</p><div class="my-4"><pre><code><strong># to list the tests available</strong><br/>print(ide.tester.list_tests())<br/><strong># to perform a specific test</strong><br/>print(ide.tester.test_functionality('name of test'))<br/><strong># to test your code (either works)</strong><br/>print(ide.tester.test_notebook())<br/>print(ide.tester.test_notebook(verbose=True))<br/><strong># to prepare and download your code</strong><br/>ide.tester.download_solution()</code></pre></div><div class="lesson-footer flex bg-gray-200 justify-center"><div class="lesson-footer-card displaycard bg-blue-200 border-t border-gray-400 max-w-2xl rounded overflow-hidden shadow-lg"><div class="px-6 py-4"><div class="title-text text-center font-bold text-xl">Local I/O</div><p class="text-center text-gray-800 text-xl">Input and Output</p><div class="text-center mt-6 text-xl"><i aria-hidden="true" class="fas fa-tags"></i> any questions on Piazza with <span class="font-bold">UP-LocalIO</span></div><div class="text-gray-700 text-base"> </div><div></div><div class="text-gray-700 text-base">References and Additional Readings</div><div class="text-xs p-2 border border-solid border-gray-500 bg-gray-300"> <div class="text-gray-700 px-4 m-2">• <!-- --> <a href="https://docs.python.org/3.6/library/stdtypes.html#string-methods" target="_blank">https://docs.python.org/3.6/library/stdtypes.html#string-methods</a></div></div><div class="flex mt-4 border-t border-solid border-gray-500 justify-around bg-gray-200"><div class="text-gray-700 text-center px-4 m-2 text-sm">🐍  4 D.S.</div><div class="text-gray-700 text-center px-4 m-2 text-sm"><strong>Version:</strong> <!-- -->SP21</div></div><div class="text-gray-700 mt-2 text-center text-sm font-bold">All Rights Reserved Michael Haberman</div><div class="text-gray-700 text-center text-sm">Do not distribute this notebook</div></div></div></div><div> </div><div class="ide code-starter clearfix"><pre><code># print(ide.tester.test_notebook()) 
# print(ide.tester.test_notebook(verbose=True)) 

# once you are ready -- run this 
# ide.tester.download_solution() 
</code></pre></div></div></div></body></html>