<!DOCTYPE html><html lang='en'><head><title>Matplotlib, part 2</title><meta charset="utf-8"><style>/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}h1{font-size:2em;margin:.67em 0}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}strong{font-weight:bolder}code{font-family:monospace,monospace;font-size:1em}img{border-style:none}input{font-family:inherit;font-size:100%;line-height:1.15;margin:0}input{overflow:visible}[type=checkbox]{box-sizing:border-box;padding:0}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}blockquote,h1,h2,p,pre{margin:0}ul{list-style:none;margin:0;padding:0}html{font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e2e8f0}img{border-style:solid}input:-ms-input-placeholder{color:#a0aec0}input::-ms-input-placeholder{color:#a0aec0}input::-moz-placeholder{color:#a0aec0}h1,h2{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}input{padding:0;line-height:inherit;color:inherit}code,pre{font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}img{display:block;vertical-align:middle}img{max-width:100%;height:auto}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}.bg-gray-200{--bg-opacity:1;background-color:#edf2f7;background-color:rgba(237,242,247,var(--bg-opacity))}.bg-gray-300{--bg-opacity:1;background-color:#e2e8f0;background-color:rgba(226,232,240,var(--bg-opacity))}.bg-orange-300{--bg-opacity:1;background-color:#fbd38d;background-color:rgba(251,211,141,var(--bg-opacity))}.bg-green-200{--bg-opacity:1;background-color:#c6f6d5;background-color:rgba(198,246,213,var(--bg-opacity))}.bg-blue-200{--bg-opacity:1;background-color:#bee3f8;background-color:rgba(190,227,248,var(--bg-opacity))}.bg-blue-300{--bg-opacity:1;background-color:#90cdf4;background-color:rgba(144,205,244,var(--bg-opacity))}.border-gray-400{--border-opacity:1;border-color:#cbd5e0;border-color:rgba(203,213,224,var(--border-opacity))}.border-gray-500{--border-opacity:1;border-color:#a0aec0;border-color:rgba(160,174,192,var(--border-opacity))}.border-indigo-500{--border-opacity:1;border-color:#667eea;border-color:rgba(102,126,234,var(--border-opacity))}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.border-solid{border-style:solid}.border{border-width:1px}.border-l-2{border-left-width:2px}.border-t{border-top-width:1px}.cursor-pointer{cursor:pointer}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.justify-center{justify-content:center}.justify-around{justify-content:space-around}.clearfix:after{content:"";display:table;clear:both}.font-sans{font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}.font-serif{font-family:Georgia,Cambria,"Times New Roman",Times,serif}.font-semibold{font-weight:600}.font-bold{font-weight:700}.h-64{height:16rem}.text-xs{font-size:.75rem}.text-sm{font-size:.875rem}.text-base{font-size:1rem}.text-xl{font-size:1.25rem}.leading-none{line-height:1}.leading-normal{line-height:1.5}.m-2{margin:.5rem}.my-4{margin-top:1rem;margin-bottom:1rem}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mr-2{margin-right:.5rem}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mt-4{margin-top:1rem}.mb-4{margin-bottom:1rem}.mt-6{margin-top:1.5rem}.max-w-sm{max-width:24rem}.max-w-2xl{max-width:42rem}.object-contain{-o-object-fit:contain;object-fit:contain}.opacity-0{opacity:0}.overflow-hidden{overflow:hidden}.p-1{padding:.25rem}.p-2{padding:.5rem}.p-3{padding:.75rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.pl-3{padding-left:.75rem}.absolute{position:absolute}.shadow-md{box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06)}.shadow-lg{box-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -2px rgba(0,0,0,.05)}.shadow-inner{box-shadow:inset 0 2px 4px 0 rgba(0,0,0,.06)}.text-left{text-align:left}.text-center{text-align:center}.text-black{--text-opacity:1;color:#000;color:rgba(0,0,0,var(--text-opacity))}.text-gray-700{--text-opacity:1;color:#4a5568;color:rgba(74,85,104,var(--text-opacity))}.text-gray-800{--text-opacity:1;color:#2d3748;color:rgba(45,55,72,var(--text-opacity))}.whitespace-no-wrap{white-space:nowrap}.w-1\/2{width:50%}.w-2\/3{width:66.666667%}.w-full{width:100%}@media (min-width:768px){.md\:w-2\/3{width:66.666667%}}.text-tiny{font-size:.5rem!important}body{color:#000!important;font-size:1.25rem!important}.main-content{max-width:900px}.lesson{padding-left:15px!important;padding-right:10px!important;--bg-opacity:1;background-color:#edf2f7;background-color:rgba(237,242,247,var(--bg-opacity))}.main-content,html{font-family:Arial,Georgia,Verdana,"Times New Roman"!important}.lesson-footer-card,.lesson-overview-card{font-family:"Times New Roman"!important}blockquote em:first-child{font-family:Times!important;font-size:1.35em;margin-right:10px}blockquote em:first-child:after{content:":"}.lesson-footer{margin-top:50px;margin-top:20px}.lesson ul{list-style-position:inside;list-style-type:none;margin-left:1em}.lesson ul li{padding-left:1em;padding-right:5px}.lesson ul li::before{content:"•";padding-right:5px}span{white-space:nowrap}p.new{padding-top:0;padding-bottom:.5em}p.new+p{padding-top:.5em}h1,h2{font-weight:700;margin-top:.25em!important;margin-bottom:.05em!important;font-family:Georgia,Cambria,"Times New Roman",Times,serif!important}h1{font-size:2em!important;clear:both;color:#000!important}div+h1,h2{margin-top:0!important}h2{margin-top:.5em!important;font-size:1.5em!important;clear:both;color:#8b0000!important}ul{margin-bottom:30px}.lesson a{text-decoration:underline;color:#00f}.title-text{font-size:2rem}blockquote{font-size:1em;background:#f9f9f9;border-left:10px solid #ccc;margin:.5em 10px;padding:.5em 10px;border-left-color:#ffcd69;border-right-color:#f6ba59;quotes:"\201C""\201D""\2018""\2019"}blockquote:before{color:#ccc;content:open-quote;font-size:4em;line-height:.1em;margin-right:.25em;vertical-align:-.4em}blockquote:after{color:#ccc;content:no-close-quote}blockquote p{display:inline}.shadow-lg{box-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -2px rgba(0,0,0,.5)}img.center{-o-object-position:center;object-position:center;margin-left:auto;margin-right:auto}img.border{border:1px solid #021a40;margin-top:.5rem;margin-bottom:.75rem}img.iw400{height:auto;width:auto;max-width:400px}img.iw500{height:auto;width:auto;max-width:500px}img.iw300{height:auto;width:auto;max-width:300px}code{font-size:smaller}pre code{font-size:15px}pre code:not(.line-number){background:#f4f4f4;font-family:monospace;font-size:15px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default;touch-action:none;-webkit-touch-callout:none;-webkit-tap-highlight-color:transparent;clear:both;border:1px solid #ddd;color:#666;page-break-inside:avoid;display:block;min-width:840px;max-width:840px;overflow:scroll;line-height:1.6;margin-bottom:1.6em;padding:1em 1.5em;-moz-tab-size:2;-o-tab-size:2;tab-size:2;word-wrap:break-word;white-space:pre-wrap;border-left:3px solid #f36d33}div.code-starter>pre code{border-left:3px solid #fdff44!important;background-image:radial-gradient(rgba(0,150,0,.75),#000 120%);color:#fff;font:.9rem Inconsolata,monospace}div.code-starter>pre code::after{content:"\a$_"}.tab{font-size:1rem;border-color:#8c6728}.tab-content{max-height:0;max-width:100%;transition:max-height .35s}.tab input:checked~.tab-content{max-height:100vh}.tab input:checked+label{padding:1rem;border-left-width:2px;border-color:#6574cd;background-color:#f8fafc;color:#6574cd}.tab label::after{float:right;right:0;top:0;display:block;width:1em;height:1.5em;line-height:1.5;font-size:1rem;text-align:center;transition:all .35s}.tab input[type=checkbox]+label::after{content:"+";font-weight:700;border-width:1px;border-radius:9999px;border-color:#8c6728}.tab input[type=checkbox]:checked+label::after{transform:rotate(315deg);background-color:#6574cd;color:#f8fafc}</style>
<script src="https://kit.fontawesome.com/7efc4bcee2.js" crossOrigin="anonymous"></script>
<script>
    let stateCheck = setInterval(function(){
      if (document.readyState === 'complete') {
        clearInterval(stateCheck);
        let s1 = document.getElementById('start');
        // console.log('doc is ready', s1);
        if (s1) {
           s1.setAttribute('tabindex', '-1');
           s1.focus(); 
           s1.scrollIntoView({behavior: 'smooth'}); 
           setTimeout(function(){s1.blur()}, 500);
           // console.log('focus set');
        }
      }
    }, 200);
    </script>
</head><body class="lesson"><div class="main-content lesson bg-gray-200 text-black p-1 pl-3 font-serif"><div class="md-inner">
<div id="start" class="section">&nbsp;</div><h1 class="overview"></h1><div class="lesson-overview bg-gray-200 flex justify-center"><div class="text-center px-4 py-2 m-2"><div class="lesson-overview-card displaycard bg-blue-200 max-w-sm rounded overflow-hidden shadow-lg"><div> </div><img alt="Text" class="object-contain h-64 w-full" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/p4ds/ds/matplotlib2/html/ds-sm.png"/><div class="px-6 py-4"><div class="title-text text-center leading-none font-bold text-xl">Matplotlib, part 2</div><p class="text-center mt-2 text-gray-800 text-xl">Annotations and Subplots</p><div class="text-gray-700 text-base"> </div><div class="text-center mb-3"><span class="inline-block bg-gray-300 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2">#info490</span></div><div class="flex border-t border-solid border-gray-500 shadow-inner justify-around bg-blue-300"><div class="text-gray-700 text-center px-4 m-2 text-sm"><span class="whitespace-no-wrap">🐍  4 D.S.</span></div><div class="text-gray-700 text-center px-4 m-2 text-sm"><span class="whitespace-no-wrap"><strong>Version:</strong> <!-- -->SP21</span></div></div><div class="text-gray-700 mt-1 text-center text-tiny">All Rights Reserved</div></div></div></div><div class="text-center px-4 py-2 m-2 w-1/2"><div class="displaycard bg-gray-200 max-w-sm rounded overflow-hidden shadow-lg"><div class="px-6 py-4 text-left"><div class="text-center font-bold text-xl">Matplotlib, part 2<br/><div><span>prerequisites</span><div class="text-center text-xs mb-2">(start only after finishing)</div><p class="max-w-sm text-gray-800 text-sm">⦿ <strong>bootcamp</strong></p><p class="max-w-sm text-gray-800 text-sm">⦿ <strong>matplotlib (part 1)</strong></p><p class="max-w-sm text-gray-800 text-sm">⦿ <strong>numpy parts 1, 2</strong></p></div></div></div><div class="px-6 py-4 text-left text-gray-800"><div class="text-center font-bold text-xl">Colab Notes</div><p class="max-w-sm text-sm">1. <strong>Copy</strong> this notebook <img alt="copy2drive.png" class="inline-block" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/p4ds/ds/matplotlib2/html/copy2drive.png"/></p><p class="max-w-sm text-sm">2. <strong>Update</strong> the <strong><code>NET_ID</code></strong> in the notebook</p><p class="max-w-sm text-gray-800 text-sm">3. <strong>Hit ▶️ </strong> to install the INFO 490 IDE</p><div class="text-center font-bold text-xl"> </div><div class="text-center font-bold text-xl">Jupyter/PyCharm Notes</div><p class="max-w-sm text-gray-800 text-sm text-left">The testing framework does <strong>not work</strong> (at this time) for Jupyter  notebooks or local code development.</p></div></div></div></div><h1 class="section" id="section1">Matplotlib, part 2 </h1><h2 id="annotations-and-subplots">Annotations and Subplots</h2><h2 id="annotating-charts-plotting-x-x-x">Annotating Charts: Plotting x¹ x² x³</h2><p class="new">In the previous matplotlib lesson, we went over the basic chart types and 
built a few bare minimum graphs. Let's start simple and keep adding to it.</p><h2 id="the-data">The Data</h2><p class="new">For the next section we will use numpy to generate 21 values from 0 to 5 (equally split) 
and generate x¹, x² and x³ graphs for each of the 21 values. The <code>y</code> values -- 
the output of the function (i.e. fx¹, fx², fx³) are <code>x</code>, <code>x</code> squared, and <code>x</code> cubed:</p><pre><code># the x values
x = np.linspace(0, 5, 21) 

# the y values
fx1 = x
fx2 = x ** 2  # have you used this operator before ?
fx3 = x ** 3</code></pre><div class="ide code-starter clearfix"><pre><code>import matplotlib
import matplotlib.pyplot as plt
import numpy as np

# add the data here</code></pre></div><p class="new">Setting up the data using Numpy makes it very efficient and user friendly (numpy 
is so great!).</p><h2 id="annotating-plots">Annotating Plots</h2><p class="new">Let's start out with a very basic chart (<code>f(x) = x</code>) but force the line 
color to be blue and add a title to the graph:</p><pre><code>def chart_v1(title, x, y):
  
    fig, axes = plt.subplots(nrows=1, ncols=1)
    axes.plot(x, y, color='blue')
    axes.set_title(title, fontsize=12)

chart_v1("x¹", x, fx1)</code></pre><div class="ide code-starter clearfix"><pre><code>
chart_v1("x¹", x, fx1)</code></pre></div><p class="new">You can see that the line is colored blue and has a title with a 12 point (pt) 
fontsize. Also, the title is actually being set on the subplot/axes. If you 
want to set the title on a figure use the <code>suptitle</code> method (see references).</p><p class="new">The <code>plot</code> method is very versatile. You can plot multiple graphs with one call:</p><pre><code>def chart_v1b(title, x1, y1, x2, y2):
  
    fig, axes = plt.subplots(nrows=1,ncols=1)
    axes.plot(x1,y1, x2,y2)
    axes.set_title(title, fontsize=12)
    fig.suptitle('Chart V1B')</code></pre><div class="ide code-starter clearfix"><pre><code>chart_v1b("x¹ x²", x, fx1, x,fx2)</code></pre></div><p class="new">We will strive to make the plotting function more generic by allowing the caller 
to pass in any number of plots. You can plot multiple lines on the same 
axes (i.e. subplot), by either calling <code>plot</code> multiple times, or by passing in 
an array of values. However, when you pass in an array of values, each 
column is considered the data set. We can use <code>np.transpose</code> to get the data 
in the correct shape:</p><div class="ide code-starter clearfix"><pre><code># Data Transposition:
dataset = [fx1, fx2, fx3]
f_x     = np.transpose(dataset)
all_x   = np.transpose([x,x,x])</code></pre></div><p class="new">Make sure you understand how the data is now formatted.</p><p class="new">We can now use this data:</p><pre><code>def chart_v2(title, x, y):
    fig, axes = plt.subplots(nrows=1,ncols=1)

    axes.plot(x, y, color='blue')  # with explicit x values
    #axes.plot(y, color='red')     # without x values

    axes.set_title(title, fontsize=12)</code></pre><div class="ide code-starter clearfix"><pre><code>chart_v2("x¹ x² x³", all_x, f_x)</code></pre></div><p class="new">A few notes, the <code>x</code> axis values can be dropped but matplotlib may not 
get the x-axis correct. Also, if the same <code>x</code> values are used for all the <code>y</code> 
graphs, you can just pass in a single array:</p><pre><code>chart_v2("x¹ x² x³", x, f_x)</code></pre><h2 id="different-plots-different-colors">Different plots, Different colors</h2><p class="new">If you want a different color for each line, you could plot each line separately 
and use the <code>color</code> parameter. In <code>chart_v1b</code>, the colors are chosen by a 
default cycle of colors. You can build your own property cycler to set a 
custom cycle of colors for your plots:</p><div class="ide code-starter clearfix"><pre><code>def chart_v3(title, x, y):

     fig, axes = plt.subplots(nrows=1,ncols=1)
  
     colors = ['red', 'green', 'blue']
     axes.set_prop_cycle(color=colors)
     axes.plot(x, y)

     axes.set_title(title, fontsize=12)

chart_v3("x¹ x² x³", all_x, f_x)</code></pre></div><h2 id="adding-a-simple-legend">Adding a Simple Legend</h2><img alt="ds1.png" class="center iw400" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/p4ds/ds/matplotlib2/html/ds1.png"/><p class="new">For making a legend, you need to get a <em>handle</em> to the elements that you want 
in the legend. All the graphing commands <strong>return the elements created</strong> -- which 
can be used by the <code>legend</code> method. You also need to provide labels as well 
(a simple array will do):</p><pre><code>def chart_v4(title, x, y):

    fig, axes = plt.subplots(nrows=1,ncols=1)
  
    colors = ['red', 'green', 'blue']
    axes.set_prop_cycle(color=colors)
    plots = axes.plot(x, y)

    # legend
    axes.set_title(title, fontsize=12)
    lbls = title.split()
    axes.legend(handles=plots, loc='upper left', labels=lbls)

    # add a grid background
    axes.grid(True)</code></pre><div class="ide code-starter clearfix"><pre><code>chart_v4("x¹ x² x³", all_x, f_x)</code></pre></div><p class="new">In the example, it assumes the title can be split into an equal number of parts. 
You can also attach a legend to the figure as well. The example also shows 
how to add a simple background grid to your graphs.</p><h2 id="axis-labels-and-tick-marks">Axis Labels and Tick Marks</h2><p class="new">As a small touch you can easily add labels to each of the <code>x</code> and <code>y</code> axis 
using the <code>set_[xy]label</code> methods. Also, you have complete control of how the 
tick and label markers appear. In the example below, we have double the tick 
marks, set at 45° angle:</p><div class="ide code-starter clearfix"><pre><code>def chart_v5(title, x, y):

    fig, axes = plt.subplots(nrows=1,ncols=1)
  
    colors = ['red', 'green', 'blue']
    axes.set_prop_cycle(color=colors)
    plots = axes.plot(x, y)

    # legend
    axes.set_title(title, fontsize=12)
    lbls = title.split()
    axes.legend(handles=plots, loc='upper left', labels=lbls)

    # add a grid background
    axes.grid(True)

    axes.set_xlabel('x')
    axes.set_ylabel('f(x)')
  
    # add tick marks at each interval + 1/2 interval
    x_count = int(np.ma.size(x, axis=0))
    x_min = np.amin(x)
    x_max = np.amax(x)
    ticks = np.linspace(x_min, x_max, int(x_count/2.0))
    labels = ["{:0.2f}".format(i) for i in ticks]
    axes.set_xticks(ticks)
    axes.set_xticklabels(labels, fontsize=12, rotation=-45)

chart_v5("x¹ x² x³", all_x, f_x)</code></pre></div><h1 class="section" id="section2">Multiple SubPlots</h1><p class="new">With matplotlib, it's also easy to work with different subplots within a figure 
to create very flexible visualizations. We are going to generate a figure with 
three subplots, all in the same 'row':</p><pre><code>fig, axes = plt.subplots(nrows=1, ncols=3, figsize=(10, 4))</code></pre><img alt="ds2.png" class="center iw500" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/p4ds/ds/matplotlib2/html/ds2.png"/><p class="new">It's important to note that <code>axes</code> is a numpy array of type <code>AxesSubplot</code> 
and you can access each axes/subplot by using standard index notation.</p><pre><code>print(type(axes), type(axes[0]))</code></pre><h2 id="first-chart">First Chart:</h2><div class="ide code-starter clearfix"><pre><code>def chart_s1(chart, x, y, title=''):
    chart.plot(x, y, label=title)
    chart.set_title(title, fontsize=12)

fig, axes = plt.subplots(nrows=1, ncols=3, figsize=(10, 4))
chart_s1(axes[0], x, fx1, 'x¹')</code></pre></div><p class="new">You can see that the figure now has 3 subplots.  We only drew into the first one.  </p><blockquote><p class="new"><strong><em>Jupyter/Colab Log</em></strong> Once a plot is shown in a notebook, the figure is no 
longer active: <code>print(plt.fignum_exists(fig.number))</code> So you need to repeat 
the creation of the figure each time (e.g. <code>fig, axes = plt.suplots(...)</code></p></blockquote><h2 id="same-chart-multiple-plots">Same chart, multiple plots</h2><p class="new">You can also plot multiple charts in the same subplot:</p><div class="ide code-starter clearfix"><pre><code>fig, axes = plt.subplots(nrows=1, ncols=3, figsize=(10, 4))
chart_s1(axes[0], x, fx1, 'x¹')
chart_s1(axes[1], x, fx2, 'x²')
chart_s1(axes[2], x, fx3, 'x³')</code></pre></div><p class="new">Note that we are calling the same function, but are passing in a different subplot 
each time. By default matplotlib will choose different colors for each plot and 
attempt to make sense of the range for each axis (the x and y).  </p><h2 id="second-chart">Second Chart:</h2><p class="new">You can force an axis to have a specific range by using the <code>set_ylim</code> and <code>set_xlim</code> 
methods to set limits on the x and y axis:</p><pre><code>def chart_s2(chart, x, y, title=''):
    chart.plot(x, y, label=title, color="red")
    chart.set_title(title, fontsize=12)
    chart.set_ylim([0, 60])
    chart.set_xlim([2, 5])</code></pre><div class="ide code-starter clearfix"><pre><code>fig, axes = plt.subplots(nrows=1, ncols=2, figsize=(10, 4))
chart_s1(axes[0], x, fx1, 'x¹')
chart_s2(axes[1], x, fx2, 'x²')</code></pre></div><p class="new">Note that we are now composing charts!  Two different functions are used to 
build different parts of the visualization. </p><p class="new">There is also a generic <code>set</code> method that you can use to set properties. However, 
it is less flexible and provides less power/functionality than the specific 
method used to set an attribute:</p><pre><code>    chart.set(ylim=[0,60], xlim=[2,5], title='apples', xlabel='x')</code></pre><h2 id="third-chart">Third Chart:</h2><p class="new">The last chart has a legend for each line chart.  In order for this to work, you need to label the plot.  We also use a log scale for the y axis and use a grid background:</p><pre><code>def chart_s3(chart, x, y, title=''):
    chart.plot(x, y, label=title, color='lightblue')
    chart.set_yscale("log")
    chart.set_title(title, fontsize=12)
    chart.grid(color='b',   # 'b' means 'blue'
               alpha=0.5, 
               linestyle='dashed', 
               linewidth=0.5)
    chart.legend(loc='lower right')</code></pre><div class="ide code-starter clearfix"><pre><code>fig, axes = plt.subplots(nrows=1, ncols=3, figsize=(10, 4))
chart_s1(axes[0], x, fx1, 'x¹')
chart_s2(axes[1], x, fx2, 'x²')
chart_s3(axes[2], x, fx3, 'x³')
_ig = fig.legend(loc='upper left')</code></pre></div><p class="new">Adding a legend to the figure works because each plot was labeled.</p><h2 id="twobytwo-and-more">TwoByTwo and More</h2><p class="new">We also set up a figure with a 2x2 grid of subplots. Since there is more than 
one row, we can access the individual subplots using a 2 dimensional notation 
(which we first saw in the bootcamp lesson 'The String, the Sequence and the Sink')</p><div class="ide code-starter clearfix"><pre><code>fig, axes = plt.subplots(nrows=2, ncols=2)
chart_s1(axes[0][0], x,fx2)
chart_s2(axes[0][1], x,fx3)
chart_s1(axes[1][0], x,fx2)
chart_s2(axes[1][1], x,fx1)</code></pre></div><h1 class="section" id="section3">Numpy Data!</h1><p class="new">Since the <code>axes</code> is a numpy array, You can use Numpy index notation: </p><pre><code>axes[0,0].set(title='upper left') 
axes[1,1].set(title='lower right')</code></pre><p class="new">Or simple looping:</p><pre><code>for ax in axes.flat:
    ax.set(...)</code></pre><h1 class="section" id="section4"><code>111</code> ?</h1><p class="new">In the previous lesson, we used the value <code>111</code> as a parameter into <code>add_subplot</code>:</p><pre><code>fig = plt.figure()
axes = fig.add_subplot(111)</code></pre><p class="new">As mentioned, <code>111</code> is processed as <em>1 row</em>, <em>1 column</em>, with the 
subplot <em>at position 1</em>. In this case, since there is only one row and 
one column the only available position is 1.</p><p class="new">We can use this notation to build more complex graphs:</p><div class="ide code-starter clearfix"><pre><code>def complex_1():
    fig = plt.figure()

    a = fig.add_subplot(1, 2, 1)  
    b = fig.add_subplot(2, 2, 2)  
    c = fig.add_subplot(2, 2, 4)

    a.set_title('top and bottom left')
    b.set_title('top right')
    c.set_title('bottom right')

    a.grid(color='b', alpha=0.5, linestyle='dashed', linewidth=0.5)
    b.grid(color='b', alpha=0.5, linestyle='dashed', linewidth=0.5)
    c.grid(color='b', alpha=0.5, linestyle='dashed', linewidth=0.5)
  
    fig.tight_layout()

complex_1()</code></pre></div><img alt="ds3.png" class="center iw500 border" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/p4ds/ds/matplotlib2/html/ds3.png"/><p class="new">You can add the following to give the labels the necessary padding so they 
don't overlap:</p><pre><code>fig.tight_layout()
axes.axis('tight') # a specific subplot</code></pre><div class="ide code-starter clearfix"><pre><code>def complex_2():
    fig = plt.figure()
    fig.add_subplot(221, title='top left')
    fig.add_subplot(222, title='top right')    
    fig.add_subplot(223, title='bottom left')    
    fig.add_subplot(224, title='bottom right') 
    fig.tight_layout()

complex_2()</code></pre></div><h1 class="section" id="section5">More Axis Labeling:</h1><p class="new">Take a look at the Y axis for x³ graph.  It's not very reader friendly.  </p><img alt="ds4.png" class="center iw500 border" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/p4ds/ds/matplotlib2/html/ds4.png"/><p class="new">We can change the scales on the plots:</p><div class="ide code-starter clearfix"><pre><code>import matplotlib.ticker as ticker

def chart_s3b(axes, title, x, y):

    chart_s3(axes, title, x, y)
 
    # now update the axes
    axes.xaxis.set_major_locator(ticker.MaxNLocator(integer=True)) 
    axes.yaxis.set_major_formatter(ticker.ScalarFormatter())</code></pre></div><p class="new">Note that the formatting is done after the drawing. Here's how we would build a new chart:</p><pre><code>fig, axes = plt.subplots(nrows=1, ncols=2, figsize=(10, 4))
chart_s2(axes[0], x, fx2, 'x²')
chart_s3b(axes[1], x, fx3, 'x³')</code></pre><p class="new">The function <code>chart_s3b</code> calls <code>chart_s3</code> to create the same plot (this is where 
the object oriented interface shows its power). Be sure you see the differences.</p><h2 id="custom-formatters">Custom Formatters</h2><p class="new">You can even specify a custom formatter. There will be a special lesson on 
using Python string's format method later:</p><div class="ide code-starter clearfix"><pre><code>def chart_s3c(axes, title, x, y):

    chart_s3(axes, title, x, y)

    def custom(x,pos):
      if x &lt; 1:
        return '{0:0.2f}'.format(x)
      else:
        return '{0:d}'.format(int(x))
  
    # now update the axes
    axes.xaxis.set_major_locator(ticker.MaxNLocator(integer=True)) 
    axes.yaxis.set_major_formatter(ticker.FuncFormatter(custom))

fig, axes = plt.subplots(nrows=1, ncols=3, figsize=(10, 4))
chart_s2(axes[0],  x, fx2, 'x²')
chart_s3(axes[1],  x, fx3, 'x³')
chart_s3c(axes[2], x, fx3, 'x³')</code></pre></div><h1 class="section" id="section6">Styles</h1><p class="new">It's also possible to define style sheets (much like CSS's role in HTML) to 
change the aesthetics of the visualizations. You can play with different 
styles (run them before any graph generation):</p><pre><code>print(plt.style.available)

plt.style.use('ggplot')
plt.style.use('fivethirtyeight')
plt.style.use('classic')</code></pre><div class="font-sans container mt-1 mb-4 "><p>🎗Before you go, you should <strong>know</strong>:</p><div class="w-2/3 md:w-2/3"><div class="shadow-md"><div class="tab overflow-hidden border-t bg-green-200"><input class="absolute opacity-0" id="tab-multi-3" name="tabs" type="checkbox"/><label class="block p-3 leading-normal cursor-pointer" for="tab-multi-3"><span> what is a matplotlib axes </span></label><div class="tab-content overflow-hidden border-l-2 bg-orange-300 border-indigo-500 leading-normal"><p class="p-3">No Answer</p></div></div><div class="tab overflow-hidden border-t bg-green-200"><input class="absolute opacity-0" id="tab-multi-4" name="tabs" type="checkbox"/><label class="block p-3 leading-normal cursor-pointer" for="tab-multi-4"><span> how to create subplots </span></label><div class="tab-content overflow-hidden border-l-2 bg-orange-300 border-indigo-500 leading-normal"><p class="p-3">No Answer</p></div></div><div class="tab overflow-hidden border-t bg-green-200"><input class="absolute opacity-0" id="tab-multi-5" name="tabs" type="checkbox"/><label class="block p-3 leading-normal cursor-pointer" for="tab-multi-5"><span> how to title, label a plot </span></label><div class="tab-content overflow-hidden border-l-2 bg-orange-300 border-indigo-500 leading-normal"><p class="p-3">No Answer</p></div></div></div></div></div><h1 class="section" id="section7">Lesson Assignment</h1><h2 id="step-0-complete-the-exercises">Step 0: complete the exercises</h2><p class="new">be sure you typed in all the examples from this lesson into your notebook.</p><h2 id="step-1-x-vs-x">Step 1: x² vs x³</h2><p class="new">Create a function named <code>plot_x2_x3</code> (no parameters) that does at least the
 following:</p><ul><li>use the OO API explained in this lesson</li><li>plots x² and x³ as two separate subplots from -20 to +20 using at least 100 data points
the 2 subplots are arranged horizontally (i.e. side by side)</li><li>x² is colored blue</li><li>x³ is colored green</li><li>x² is titled x² (12 pt font) and its y axis is from 0 to 500</li><li>x³ is titled x³ (12 pt font) and its y axis is from -1000 to +1000</li><li>use your first name for the title of the figure (14 pt font)</li><li>all data must be internal to the function (i.e. no global variables)</li><li>return the figure created</li></ul><img alt="ds5.png" class="center iw300 border" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/p4ds/ds/matplotlib2/html/ds5.png"/><div class="ide code-starter clearfix"><pre><code># solution</code></pre></div><h1>Test and Submit</h1><p>Once you have finished, you can download your code (via <code>ide.tester</code>) and upload that file to Gradescope (find lesson with tag <strong>DS-Matplotlib2</strong>).</p><div class="my-4"><pre><code><strong># to list the tests available</strong><br/>print(ide.tester.list_tests())<br/><strong># to perform a specific test</strong><br/>print(ide.tester.test_functionality('name of test'))<br/><strong># to test your code (either works)</strong><br/>print(ide.tester.test_notebook())<br/>print(ide.tester.test_notebook(verbose=True))<br/><strong># to prepare and download your code</strong><br/>ide.tester.download_solution()</code></pre></div><div class="lesson-footer flex bg-gray-200 justify-center"><div class="lesson-footer-card displaycard bg-blue-200 border-t border-gray-400 max-w-2xl rounded overflow-hidden shadow-lg"><div class="px-6 py-4"><div class="title-text text-center font-bold text-xl">Matplotlib, part 2</div><p class="text-center text-gray-800 text-xl">Annotations and Subplots</p><div class="text-center mt-6 text-xl"><i aria-hidden="true" class="fas fa-tags"></i> any questions on Piazza with <span class="font-bold">DS-Matplotlib2</span></div><div class="text-gray-700 text-base"> </div><div></div><div class="text-gray-700 text-base">References and Additional Readings</div><div class="text-xs p-2 border border-solid border-gray-500 bg-gray-300"> <div class="text-gray-700 px-4 m-2"><span> </span> <strong>Titles</strong></div><div class="text-gray-700 px-4 m-2">• <!-- --> <a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.suptitle.html" target="_blank">https://matplotlib.org/api/_as_gen/matplotlib.pyplot.suptitle.html</a></div><div class="text-gray-700 px-4 m-2">• <!-- --> <a href="https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.set_title.html" target="_blank">https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.set_title.html</a></div><div class="text-gray-700 px-4 m-2"><span> </span> <strong>Legends</strong></div><div class="text-gray-700 px-4 m-2">• <!-- --> <a href="https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.legend.html" target="_blank">https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.legend.html</a></div><div class="text-gray-700 px-4 m-2">• <!-- --> <a href="https://jakevdp.github.io/PythonDataScienceHandbook/04.06-customizing-legends.html" target="_blank">https://jakevdp.github.io/PythonDataScienceHandbook/04.06-customizing-legends.html</a></div><div class="text-gray-700 px-4 m-2"><span> </span> <strong>Formatting Scales</strong></div><div class="text-gray-700 px-4 m-2">• <!-- --> <a href="https://matplotlib.org/api/ticker_api.html" target="_blank">https://matplotlib.org/api/ticker_api.html</a></div><div class="text-gray-700 px-4 m-2"><span> </span> <strong>Tight Layout</strong></div><div class="text-gray-700 px-4 m-2">• <!-- --> <a href="https://matplotlib.org/users/tight_layout_guide.html" target="_blank">https://matplotlib.org/users/tight_layout_guide.html</a></div><div class="text-gray-700 px-4 m-2"><span> </span> <strong>Styles</strong></div><div class="text-gray-700 px-4 m-2">• <!-- --> <a href="https://tonysyu.github.io/raw_content/matplotlib-style-gallery/gallery.html" target="_blank">https://tonysyu.github.io/raw_content/matplotlib-style-gallery/gallery.html</a></div></div><div class="flex mt-4 border-t border-solid border-gray-500 justify-around bg-gray-200"><div class="text-gray-700 text-center px-4 m-2 text-sm">🐍  4 D.S.</div><div class="text-gray-700 text-center px-4 m-2 text-sm"><strong>Version:</strong> <!-- -->SP21</div></div><div class="text-gray-700 mt-2 text-center text-sm font-bold">All Rights Reserved Michael Haberman</div><div class="text-gray-700 text-center text-sm">Do not distribute this notebook</div></div></div></div><div> </div><div class="ide code-starter clearfix"><pre><code># print(ide.tester.test_notebook()) 
# print(ide.tester.test_notebook(verbose=True)) 

# once you are ready -- run this 
# ide.tester.download_solution() 
</code></pre></div></div></div></body></html>