<!DOCTYPE html><html lang='en'><head><title>Color Maps</title><meta charset="utf-8"><style>/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}h1{font-size:2em;margin:.67em 0}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}strong{font-weight:bolder}code{font-family:monospace,monospace;font-size:1em}img{border-style:none}input{font-family:inherit;font-size:100%;line-height:1.15;margin:0}input{overflow:visible}[type=checkbox]{box-sizing:border-box;padding:0}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}blockquote,h1,h2,h3,p,pre{margin:0}ul{list-style:none;margin:0;padding:0}html{font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e2e8f0}img{border-style:solid}input:-ms-input-placeholder{color:#a0aec0}input::-ms-input-placeholder{color:#a0aec0}input::-moz-placeholder{color:#a0aec0}h1,h2,h3{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}input{padding:0;line-height:inherit;color:inherit}code,pre{font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}img{display:block;vertical-align:middle}img{max-width:100%;height:auto}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}.bg-gray-200{--bg-opacity:1;background-color:#edf2f7;background-color:rgba(237,242,247,var(--bg-opacity))}.bg-gray-300{--bg-opacity:1;background-color:#e2e8f0;background-color:rgba(226,232,240,var(--bg-opacity))}.bg-orange-300{--bg-opacity:1;background-color:#fbd38d;background-color:rgba(251,211,141,var(--bg-opacity))}.bg-green-200{--bg-opacity:1;background-color:#c6f6d5;background-color:rgba(198,246,213,var(--bg-opacity))}.bg-blue-200{--bg-opacity:1;background-color:#bee3f8;background-color:rgba(190,227,248,var(--bg-opacity))}.bg-blue-300{--bg-opacity:1;background-color:#90cdf4;background-color:rgba(144,205,244,var(--bg-opacity))}.border-gray-400{--border-opacity:1;border-color:#cbd5e0;border-color:rgba(203,213,224,var(--border-opacity))}.border-gray-500{--border-opacity:1;border-color:#a0aec0;border-color:rgba(160,174,192,var(--border-opacity))}.border-indigo-500{--border-opacity:1;border-color:#667eea;border-color:rgba(102,126,234,var(--border-opacity))}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.border-solid{border-style:solid}.border{border-width:1px}.border-l-2{border-left-width:2px}.border-t{border-top-width:1px}.cursor-pointer{cursor:pointer}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.justify-center{justify-content:center}.justify-around{justify-content:space-around}.float-left{float:left}.clearfix:after{content:"";display:table;clear:both}.font-sans{font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}.font-serif{font-family:Georgia,Cambria,"Times New Roman",Times,serif}.font-semibold{font-weight:600}.font-bold{font-weight:700}.h-64{height:16rem}.text-xs{font-size:.75rem}.text-sm{font-size:.875rem}.text-base{font-size:1rem}.text-xl{font-size:1.25rem}.leading-none{line-height:1}.leading-normal{line-height:1.5}.m-2{margin:.5rem}.my-1{margin-top:.25rem;margin-bottom:.25rem}.my-3{margin-top:.75rem;margin-bottom:.75rem}.my-4{margin-top:1rem;margin-bottom:1rem}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mr-2{margin-right:.5rem}.mb-2{margin-bottom:.5rem}.mr-3{margin-right:.75rem}.mb-3{margin-bottom:.75rem}.mt-4{margin-top:1rem}.mb-4{margin-bottom:1rem}.mt-6{margin-top:1.5rem}.max-w-sm{max-width:24rem}.max-w-2xl{max-width:42rem}.object-contain{-o-object-fit:contain;object-fit:contain}.opacity-0{opacity:0}.overflow-hidden{overflow:hidden}.p-1{padding:.25rem}.p-2{padding:.5rem}.p-3{padding:.75rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.pl-3{padding-left:.75rem}.absolute{position:absolute}.shadow-md{box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06)}.shadow-lg{box-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -2px rgba(0,0,0,.05)}.shadow-inner{box-shadow:inset 0 2px 4px 0 rgba(0,0,0,.06)}.text-left{text-align:left}.text-center{text-align:center}.text-black{--text-opacity:1;color:#000;color:rgba(0,0,0,var(--text-opacity))}.text-gray-700{--text-opacity:1;color:#4a5568;color:rgba(74,85,104,var(--text-opacity))}.text-gray-800{--text-opacity:1;color:#2d3748;color:rgba(45,55,72,var(--text-opacity))}.whitespace-no-wrap{white-space:nowrap}.w-1\/2{width:50%}.w-2\/3{width:66.666667%}.w-1\/4{width:25%}.w-full{width:100%}@media (min-width:768px){.md\:w-2\/3{width:66.666667%}}.text-tiny{font-size:.5rem!important}body{color:#000!important;font-size:1.25rem!important}.main-content{max-width:900px}.lesson{padding-left:15px!important;padding-right:10px!important;--bg-opacity:1;background-color:#edf2f7;background-color:rgba(237,242,247,var(--bg-opacity))}.main-content,html{font-family:Arial,Georgia,Verdana,"Times New Roman"!important}.lesson-footer-card,.lesson-overview-card{font-family:"Times New Roman"!important}blockquote em:first-child{font-family:Times!important;font-size:1.35em;margin-right:10px}blockquote em:first-child:after{content:":"}.lesson-footer{margin-top:50px;margin-top:20px}.lesson ul{list-style-position:inside;list-style-type:none;margin-left:1em}.lesson ul li{padding-left:1em;padding-right:5px}.lesson ul li::before{content:"•";padding-right:5px}span{white-space:nowrap}p.new{padding-top:0;padding-bottom:.5em}p.new+p{padding-top:.5em}h1,h2,h3{font-weight:700;margin-top:.25em!important;margin-bottom:.05em!important;font-family:Georgia,Cambria,"Times New Roman",Times,serif!important}h1{font-size:2em!important;clear:both;color:#000!important}div+h1,h2{margin-top:0!important}h2{margin-top:.5em!important;font-size:1.5em!important;clear:both;color:#8b0000!important}h3{font-size:1.25em!important;clear:both;color:#006400!important}ul{margin-bottom:30px}p.new a{text-decoration:underline}.lesson a{text-decoration:underline;color:#00f}.title-text{font-size:2rem}blockquote{font-size:1em;background:#f9f9f9;border-left:10px solid #ccc;margin:.5em 10px;padding:.5em 10px;border-left-color:#ffcd69;border-right-color:#f6ba59;quotes:"\201C""\201D""\2018""\2019"}blockquote:before{color:#ccc;content:open-quote;font-size:4em;line-height:.1em;margin-right:.25em;vertical-align:-.4em}blockquote:after{color:#ccc;content:no-close-quote}blockquote p{display:inline}.shadow-lg{box-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -2px rgba(0,0,0,.5)}img.formula-inline{margin-top:.25rem;margin-bottom:.25rem}img.wrap{margin-right:1rem!important;border:1px solid #021a40}img.center{-o-object-position:center;object-position:center;margin-left:auto;margin-right:auto}img.small{width:33.333333%;margin-left:1.25rem}img.border{border:1px solid #021a40;margin-top:.5rem;margin-bottom:.75rem}img.iw400{height:auto;width:auto;max-width:400px}img.iw300{height:auto;width:auto;max-width:300px}code{font-size:smaller}pre code{font-size:15px}pre code:not(.line-number){background:#f4f4f4;font-family:monospace;font-size:15px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default;touch-action:none;-webkit-touch-callout:none;-webkit-tap-highlight-color:transparent;clear:both;border:1px solid #ddd;color:#666;page-break-inside:avoid;display:block;min-width:840px;max-width:840px;overflow:scroll;line-height:1.6;margin-bottom:1.6em;padding:1em 1.5em;-moz-tab-size:2;-o-tab-size:2;tab-size:2;word-wrap:break-word;white-space:pre-wrap;border-left:3px solid #f36d33}div.code-starter>pre code{border-left:3px solid #fdff44!important;background-image:radial-gradient(rgba(0,150,0,.75),#000 120%);color:#fff;font:.9rem Inconsolata,monospace}div.code-starter>pre code::after{content:"\a$_"}.tab{font-size:1rem;border-color:#8c6728}.tab-content{max-height:0;max-width:100%;transition:max-height .35s}.tab input:checked~.tab-content{max-height:100vh}.tab input:checked+label{padding:1rem;border-left-width:2px;border-color:#6574cd;background-color:#f8fafc;color:#6574cd}.tab label::after{float:right;right:0;top:0;display:block;width:1em;height:1.5em;line-height:1.5;font-size:1rem;text-align:center;transition:all .35s}.tab input[type=checkbox]+label::after{content:"+";font-weight:700;border-width:1px;border-radius:9999px;border-color:#8c6728}.tab input[type=checkbox]:checked+label::after{transform:rotate(315deg);background-color:#6574cd;color:#f8fafc}</style>
<script src="https://kit.fontawesome.com/7efc4bcee2.js" crossOrigin="anonymous"></script>
<script>
    let stateCheck = setInterval(function(){
      if (document.readyState === 'complete') {
        clearInterval(stateCheck);
        let s1 = document.getElementById('start');
        // console.log('doc is ready', s1);
        if (s1) {
           s1.setAttribute('tabindex', '-1');
           s1.focus(); 
           s1.scrollIntoView({behavior: 'smooth'}); 
           setTimeout(function(){s1.blur()}, 500);
           // console.log('focus set');
        }
      }
    }, 200);
    </script>
</head><body class="lesson"><div class="main-content lesson bg-gray-200 text-black p-1 pl-3 font-serif"><div class="md-inner">
<div id="start" class="section">&nbsp;</div><h1 class="overview"></h1><div class="lesson-overview bg-gray-200 flex justify-center"><div class="text-center px-4 py-2 m-2"><div class="lesson-overview-card displaycard bg-blue-200 max-w-sm rounded overflow-hidden shadow-lg"><div> </div><img alt="Text" class="object-contain h-64 w-full" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/dmap/data/cmaps/html/DataOnTheRun-sm.png"/><div class="px-6 py-4"><div class="title-text text-center leading-none font-bold text-xl">Color Maps</div><p class="text-center mt-2 text-gray-800 text-xl">Color Spectrums</p><div class="text-gray-700 text-base"> </div><div class="text-center mb-3"><span class="inline-block bg-gray-300 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2">#colormaps</span><span class="inline-block bg-gray-300 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2">#data</span><span class="inline-block bg-gray-300 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2">#matplotlib</span></div><div class="flex border-t border-solid border-gray-500 shadow-inner justify-around bg-blue-300"><div class="text-gray-700 text-center px-4 m-2 text-sm"><span class="whitespace-no-wrap">D.M. &amp; the 🐍</span></div><div class="text-gray-700 text-center px-4 m-2 text-sm"><span class="whitespace-no-wrap"><strong>Version:</strong> <!-- -->SP21</span></div></div><div class="text-gray-700 mt-1 text-center text-tiny">All Rights Reserved</div></div></div></div><div class="text-center px-4 py-2 m-2 w-1/2"><div class="displaycard bg-gray-200 max-w-sm rounded overflow-hidden shadow-lg"><div class="px-6 py-4 text-left"><div class="text-center font-bold text-xl">Color Maps<br/><div><span>prerequisites</span><div class="text-center text-xs mb-2">(start only after finishing)</div><p class="max-w-sm text-gray-800 text-sm">⦿ <strong>color</strong></p></div></div></div><div class="px-6 py-4 text-left text-gray-800"><div class="text-center font-bold text-xl">Colab Notes</div><p class="max-w-sm text-sm">1. <strong>Copy</strong> this notebook <img alt="copy2drive.png" class="inline-block" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/dmap/data/cmaps/html/copy2drive.png"/></p><p class="max-w-sm text-sm">2. <strong>Update</strong> the <strong><code>NET_ID</code></strong> in the notebook</p><p class="max-w-sm text-gray-800 text-sm">3. <strong>Hit ▶️ </strong> to install the INFO 490 IDE</p><div class="text-center font-bold text-xl"> </div><div class="text-center font-bold text-xl">Jupyter/PyCharm Notes</div><p class="max-w-sm text-gray-800 text-sm text-left">The testing framework does <strong>not work</strong> (at this time) for Jupyter  notebooks or local code development.</p></div></div></div></div><h1 class="section" id="section1">Color Maps </h1><img alt="USACMap.png" class="float-left w-1/4 mr-2 border" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/dmap/data/cmaps/html/USACMap.png"/><p class="new">In the previous lesson on color, you learned different ways to specify colors
in matplotlib.  In those examples, you always determined the color choice. However,
there are many situations where you want your <strong>data</strong> to determine the color choice.</p><p class="new">This lesson is how you can set up either predefined colormaps or have a
 mathematically defined colormap where your data will determine which color
  to display based on its value.</p><p class="new">Colormaps allow you to map a numeric value to a color. Specifically, it maps a value from 0 to 1 (usually) to an RBGA color.  In
 some situations, you can store your 'image' as a simple matrix of numbers rather 
 than a 'color' specification for each point. Hence, using a colormap can help to decrease 
 the amount of memory/storage. More importantly, colormaps can help to quickly
 communicate the data values;  You can use the values in such a way that allow 
you to 'move' through a color space.</p><h2 id="built-in-colormaps">Built In Colormaps</h2><p class="new">Matplotlib colormaps are divided into the following categories: sequential, diverging, and qualitative. 
You can view the color schemes of all colormaps in the 
<a href="https://matplotlib.org/examples/color/colormaps_reference.html" target="_blank">documentation</a>.
Below we show just a few samples of the possible category and their
 respective names.  You will use these names (case sensitive) to reference
  the colormap in matplotlib.</p><br/><p class="new"><strong>Perceptually Uniform Sequential</strong>: ['viridis', 'plasma', 'inferno', 'magma']</p><ul><li>often the best choice</li><li>should be used when equal steps in data are perceived as equal steps in the color space. Researchers have found that the human brain perceives changes in the lightness parameter as changes in the data much better than, for example, changes in hue.</li><li>viridis, plasma, inferno, magma shown below
<img alt="puscmap.png" class="float-clear w-1/2" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/dmap/data/cmaps/html/puscmap.png"/></li></ul><br/><p class="new"><strong>Sequential</strong>: ['Greys', 'Purples', 'Blues', 'Greens', 'Oranges', 'Reds', 'YlOrBr', 'YlOrRd', 'OrRd', 'PuRd', 'RdPu', 'BuPu', 'GnBu', 'PuBu', 'YlGnBu', 'PuBuGn', 'BuGn', 'YlGn']</p><ul><li>change in lightness and often saturation of color incrementally, often using a single hue</li><li>should be used for representing information that has ordering</li><li>Blues, Greens, Oranges, Reds shown below
<img alt="scmap.png" class="float-clear w-1/2" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/dmap/data/cmaps/html/scmap.png"/></li></ul><br/><p class="new"><strong>Sequential (2)</strong>: ['binary', 'gist_yarg', 'gist_gray', 'gray', 'bone', 'pink', 'spring', 'summer', 'autumn', 'winter', 'cool', 'Wistia', 'hot', 'afmhot', 'gist_heat', 'copper']</p><ul><li>summer, autumn, winter, cool shown below
<img alt="sc2map.png" class="float-clear w-1/2" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/dmap/data/cmaps/html/sc2map.png"/></li></ul><br/><p class="new"><strong>Diverging</strong>: ['PiYG', 'PRGn', 'BrBG', 'PuOr', 'RdGy', 'RdBu', 'RdYlBu', 'RdYlGn', 'Spectral', 'coolwarm', 'bwr', 'seismic']</p><ul><li>change in lightness and possibly saturation of two different colors that meet in the middle at an unsaturated color</li><li>should be used when the information being plotted has a critical middle value, such as topography or when the data deviates around zero</li><li>RdYlBu, RdYlGn, Spectral, coolwarm shown below
<img alt="dcmap.png" class="float-clear w-1/2" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/dmap/data/cmaps/html/dcmap.png"/></li></ul><br/><p class="new"><strong>Cyclic</strong>: ['twilight', 'twilight_shifted', 'hsv']</p><ul><li>change in lightness of two different colors that meet in the middle and beginning/end at an unsaturated color</li><li>should be used for values that wrap around at the endpoints, such as phase angle, wind direction, or time of day
<img alt="cyclic.png" class="float-clear w-1/2" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/dmap/data/cmaps/html/cyclic.png"/></li></ul><br/><p class="new"><strong>Qualitative</strong>: ['Pastel1', 'Pastel2', 'Paired', 'Accent', 'Dark2', 'Set1', 'Set2', 'Set3', 'tab10', 'tab20', 'tab20b', 'tab20c']</p><ul><li>often are miscellaneous colors</li><li>should be used to represent categories or information which does not have ordering or relationships</li><li>Dark2, Set1, Set2, Set3 are shown below
<img alt="qcmap.png" class="float-clear w-1/2" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/dmap/data/cmaps/html/qcmap.png"/></li></ul><br/><p class="new"><strong>Miscellaneous</strong>: ['flag', 'prism', 'ocean', 'gist_earth', 'terrain', 'gist_stern', 'gnuplot', 'gnuplot2', 'CMRmap', 'cubehelix', 'brg', 'hsv', 'gist_rainbow', 'rainbow', 'jet', 'nipy_spectral', 'gist_ncar']</p><p class="new">Visit the matplotlib documentation to view these colormaps.  At one point
 'jet' was the default colormap used -- but it was found to be harmful (read on) </p><h2 id="using-colormaps-exercise-1">Using Colormaps, Exercise 1</h2><p class="new">Colormaps are used heavily in viewing image data or to easily convey how the
 data is distributed across a dimension. For example, the diverging colormaps, 
 places white in the middle and allow you to see how values are spread between 
 positive and negative values.</p><p class="new">In the example below see how 'seismic' a diverging colormap is different from
 the green sequential colormap. Run the code below to see the result. Then 
 change the colormap to be the green sequential colormap.  </p><p class="new">Note that the currently available colormap names listed above are case sensitive.</p><div class="ide code-starter clearfix"><pre><code>import matplotlib
import matplotlib.pyplot as plt
from matplotlib import cm
import numpy as np
from LessonUtil import RandomData, RandomPetData

def colormap_scatterplot(data, cm):
  fig, axes = plt.subplots()
  axes.scatter(data.x, data.y, s=50, c=data.n, cmap=cm)
  return fig

def colormap_lineplot(data, cm):
  fig, axes = plt.subplots()
  axes.scatter(data.n, data.n, s=50, c=data.n, cmap=cm)
  return fig

from matplotlib import cm
colormap = cm.get_cmap('Greens')  
colormap = cm.get_cmap('seismic') # run, then comment this line out 

data = RandomData(200)
f = colormap_scatterplot(data, colormap)
f = colormap_lineplot(data, colormap)</code></pre></div><p class="new">Notes:</p><ul><li>The <code>c</code> parameter (which we used in the previous lesson to indicate the color) 
is used to index into the colormap</li><li>Run this code and view the output  (seismic colormap is used)</li><li>Then change the color map to <code>Greens</code> and re-run the code</li><li>Matplotlib will normalize the data as well.  Even though we use <code>data.n</code>, 
Matplotlib will figure out values to use. You can also pass in a normalization 
function if you need to map your data differently.</li></ul><h2 id="creating-colormaps-exercise-2">Creating Colormaps, Exercise 2</h2><p class="new">It's also pretty easy to use Matplotlib's <code>ListedColormap</code> to 
create a simple colormap.</p><div class="ide code-starter clearfix"><pre><code>colors = ['#7fc97f', '#beaed4','#fdc086', '#ffff99']
colormap = matplotlib.colors.ListedColormap(colors)

f = colormap_scatterplot(data, colormap)
f = colormap_lineplot(data, colormap)</code></pre></div><p class="new">As a reminder (a hint that will be useful), the colormap is just a function
 that maps numbers to colors:</p><pre><code>print(colormap(0))</code></pre><h1 class="section" id="section2">Colormaps and Image Data</h1><p class="new">Image data is just a 2D matrix of color values.  You can think of each value
 as a pixel. The physical size of a pixel depends on the device/screen -- it is essentially
 the smallest dot that can be turned on/off with a given color.  How pixels are
physically constructed (individual 'sub-pixel' elements of r,g,b etc ) is well 
beyond what we need to know for this class.</p><p class="new">You can think of image data (regardless of it's format -- jpeg, png, gif, mp4 frame) as
simply a two dimensional grid of color values.  These values can be integers/floats 
that are used to index into a colormap (e.g the value '0' could be 'black ', 
'1' as 'white') or values that include the complete r,g,b,a specification 
(e .g. (255, 127, 84, 255)).</p><p class="new">If you have 100x100 grid of color values (i.e. pixels), you can decide how to 
render that grid.  For example, each pixel value could be rendered 
to a single device pixel (a dot on your screen) or rendered having both a
 width and height.</p><h2 id="imshow-for-images"><code>imshow</code> for images</h2><p class="new">Matplotlib's <code>imshow</code> is the workhorse for displaying image data.  It is
 extremely flexible and allows you to plot/show various types of image/matrix
 data.</p><p class="new">For example, to display an image file you can do the following:</p><div class="ide code-starter clearfix"><pre><code>from matplotlib.cbook import get_sample_data

def show_image():
  fo = get_sample_data('grace_hopper.png')
  data = plt.imread(fo)
  
  fig, ax = plt.subplots()
  im = ax.imshow(data)

show_image()</code></pre></div><p class="new">A few notes:</p><ul><li><code>get_sample_data</code> returns a file object from which data can be read</li><li><code>plt.imread</code> can be used to read an image file</li><li><code>imshow</code> displays the data</li></ul><p class="new">Another interesting note is that (0,0) is the upper left corner.</p><h2 id="pixel-data-exercise-3">Pixel Data, Exercise 3</h2><p class="new">Add the following code to <code>show_image</code> to demonstrate using the
pixel data directly.  Be sure to experiment with the different
pixel samples.</p><pre><code>  ny, nx, nbands = data.shape
  print(data.shape)
  
  # take a pixel sample
  pmid = data[250][250]  # somewhere on the face
  pmid = data[599][300]  # blue shirt
  pmid = data[350][125]  # red of flag
  print(pmid)
  
  # let's draw the sample as a large point (s=350)
  ax.scatter(400, 100, color=pmid, s=350)</code></pre><h2 id="imshow-for--heatmaps"><code>imshow</code> for 🔥 Heatmaps</h2><p class="new">A heatmap simply displays different colors based on the data.
It's a graphical representation of data where values are depicted by color. 
Heat maps make it easy to visualize complex data and understand it at a glance:
They can be used for both numeric and categorical data.</p><p class="new">The example below shows a fictitious heatmap for characters in the 7
 different Harry Potter books:</p><div class="ide code-starter clearfix"><pre><code>import numpy as np
def heatmap_hp(n=2):
  names = ["harry", "ron", "hermione", "hagrid",
              "dursley", "snape", "malfoy"]
  books = [str(i) for i in range(1,8)]

  social = np.array([[0.8, 2.4, 2.5, 3.9, 0.0, 4.0, 0.0],
                    [2.4, 0.0, 4.0, 1.0, 2.7, 0.0, 0.0],
                    [1.1, 2.4, 0.8, 4.3, 1.9, 4.4, 0.0],
                    [0.6, 0.0, 0.3, 0.0, 3.1, 0.0, 0.0],
                    [0.7, 1.7, 0.6, 2.6, 2.2, 6.2, 0.0],
                    [1.3, 1.2, 0.0, 0.0, 0.0, 3.2, 5.1],
                    [0.1, 2.0, 0.0, 1.4, 0.0, 1.9, 6.3]])
 
  fig, ax = plt.subplots(figsize=(5,5))
  ax.set_xticks(np.arange(len(books)))
  ax.set_yticks(np.arange(len(names)))
  
  ax.set_xticklabels(books)
  ax.set_yticklabels(names)  
  im = ax.imshow(social)

  return fig

fig = heatmap_hp()</code></pre></div><p class="new">Of course, you pass in your own colormap if you don't like the defaults:</p><pre><code>  im = ax.imshow(social, cmap='gist_earth')</code></pre><p class="new">Depending on your needs, you can move the origin as well:
<code>im = ax.imshow(social, cmap='gist_earth', origin='lower')</code></p><h3 id="adjusting-pixel-size">Adjusting 'Pixel' Size</h3><p class="new">In the next example, it shows that the size of each 'pixel' is 
determined by the size of the figure and the amount of data that's needed to 
display.  You can see this by adjusting the parameter <code>n</code>.</p><div class="ide code-starter clearfix"><pre><code>from matplotlib.ticker import MaxNLocator

def heatmap(n=2):
  rdata = RandomData(n*n)
  square = np.array(rdata.x).reshape(n,n)
  fig, ax = plt.subplots()

  im = ax.imshow(square, cmap='gist_earth', origin='lower')

  # Set major locators on the axis to integer values
  ax.yaxis.set_major_locator(MaxNLocator(integer=True))  
  ax.xaxis.set_major_locator(MaxNLocator(integer=True)) 
  return fig

fig = heatmap(10)</code></pre></div><h3 id="functional-heatmaps">Functional Heatmaps</h3><img alt="functHeatmap.png" class="mb-3 iw300 float-left border mr-3" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/dmap/data/cmaps/html/functHeatmap.png"/><p class="new">The example below demonstrates how you can use a function to define your
 heatmap as well.  </p><p class="new">It's another example of where numpy can be used to easily generate a dataset.
The function <img alt="math?math=%5Clarge%20z%3D(1-x%5E2%2By%5E3)%20e%5E%7B-(x%5E2%2By%5E2)%2F2%7D" class="my-1 formula-inline" src="https://render.githubusercontent.com/render/math?math=%5Clarge%20z%3D(1-x%5E2%2By%5E3)%20e%5E%7B-(x%5E2%2By%5E2)%2F2%7D" style="display:inline-block"/> is used to show different areas of 'hot' and 'cold'.  </p><div class="ide code-starter clearfix"><pre><code>import numpy as np
def plot_heat():

  # Mathematical function we need to plot
  fn_text = "$z=(1-x^2+y^3) e^{-(x^2+y^2)/2}$"
  def z_func(x, y):
    return (1 - (x ** 2 + y ** 3)) * np.exp(-(x ** 2 + y ** 2) / 2)

  # Setting up input values
  x = np.arange(-3.0, 3.0, 0.1)
  y = np.arange(-3.0, 3.0, 0.1)
  X, Y = np.meshgrid(x, y)
  
  # fun with numpy (calculate all the points)
  data = z_func(X, Y)

  fig, ax = plt.subplots(figsize=(6,6))
  cmap = plt.cm.RdBu
  im = ax.imshow(data, cmap=cmap) 

  ax.set_title(fn_text)
  
plot_heat()</code></pre></div><p class="new">You can make it smooth using 'bilinear interpolation' as well.  The <code>extent</code> 
is used to change the x and y axis. </p><pre><code>interpolation='bilinear', extent=(-3, 3, 3, -3))</code></pre><h2 id="imshow-for-contour-plots"><code>imshow</code> for Contour Plots</h2><img alt="bivariate.png" class="border iw300 float-left my-3 mr-3" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/dmap/data/cmaps/html/bivariate.png"/><p class="new">If your data represents some two-dimensional contour plot (3D contour plotting
 is available, but <code>imshow</code> is for only 2D data).</p><p class="new">For this example we are going to use a sample data set that represents a simple 15x15 matrix
of bivariate normal data. It's essentially the same values as <code>RandomData</code>, but
not 'random'.</p><p class="new">The “regular” normal distribution has one random variable; a bivariate normal distribution is made up of two independent random variables. 
The two variables in a bivariate normal are both normally distributed, and 
they have a normal distribution when both are added together. 
Visually, the bivariate normal distribution is a three-dimensional bell curve 
(as shown in the image).</p><div class="ide code-starter clearfix"><pre><code>from matplotlib.cbook import get_sample_data
import numpy as np

def bivariate_map():
    io = get_sample_data('axes_grid/bivariate_normal.npy') # 3.3 , np_load=True)
    data = np.load(io.name)
    fig, ax = plt.subplots()
    im = ax.imshow(data, cmap='gist_earth')  

bivariate_map()</code></pre></div><p class="new">You can add a colorbar simply by adding this line:</p><pre><code>  fig.colorbar(im)</code></pre><p class="new">You will want to consult the <a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.imshow.html" target="_blank">imshow</a> 
documentation -- as there are many features to the API. </p><h2 id="colormaps-are-dangerous-">Colormaps are Dangerous ☠️</h2><p class="new">The selection of a colormap is an important consideration. A poor selection can result in 
a improper understanding or misinterpretation of the data. 
You should <a href="https://www.eecs.harvard.edu/~kgajos/papers/2011/borkin11-infoviz.pdf" target="_blank">read</a>
how the once default 'jet' colormap lead to more diagnostic errors.</p><p class="new">The <a href="https://brushingupscience.com/2015/12/15/stop-using-rainbow-colourmaps/" target="_blank">rainbow</a>
colormap has also been widely criticized as a poor colormap as well.</p><p class="new">When deciding which colormap to use will not only depend on what you are
 trying to communicate, but also what the data represents.  Always consult
 a good <a href="https://www.kennethmoreland.com/color-advice/" target="_blank">resource</a> for more
 information on colormap selection.
</p><h1 class="section" id="section3">Colormaps and Categorical Data</h1><img alt="cat.png" class="wrap float-left" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/dmap/data/cmaps/html/cat.png"/><p class="new">When a dataset contains categorical or ordinal attributes (gender, favorite food, pet type, happiness)
you will need to map these words/tokens to a number so it can be used with a
 colormap.</p><p class="new">One of the easiest ways is to create a dictionary of all the possible values
 and then map each to an integer.  This works well if the data is very clean
 (all the categories are normalized or the values come from a selection and
 not a text field or user input).  Also, if the data is ordinal, it's
 important that the categories and resulting integers are ordered properly.</p><p class="new">For example, the <code>pet</code> attribute is categorical data.  We can convert each
 category to a number:</p><div class="ide code-starter clearfix"><pre><code>import pandas as pd

def convert_names_to_numbers():
  data = RandomPetData(100)
  df = pd.DataFrame({'pet': data.pet, 'x': data.x, 'y': data.y})
  names = df.pet.unique().tolist()
  df['pet_idx'] = df['pet'].apply(lambda col: names.index(col))
  return df

df = convert_names_to_numbers()
print(df.groupby('pet_idx')['pet_idx'].count())</code></pre></div><p class="new">You can simplify this even more by using the Panda's 'category' type:</p><pre><code>  df = pd.DataFrame({'pet': data.pet, 'x': data.x, 'y': data.y})
  df['pet_idx'] = df.pet.astype("category").cat.codes
  return df</code></pre><p class="new">Once you have this mapping, it's easy to then bring in colormap.  Matplotlib
 has qualitative colormaps but you can also create your own:</p><pre><code>colors = [ (1.0, 1.0, 0),      # yellow 
           '#33FF66',          # green 
           (0.25, 0.25, 0.25), # dark gray 
           'b']                # blue
           
cmap = matplotlib.colors.ListedColormap(colors)</code></pre><p class="new">Each element in the colors array will correspond to a category (in the <code>names</code> list).
There are many ways to <a href="https://matplotlib.org/3.1.1/tutorials/colors/colormap-manipulation.html" target="_blank">create a colormap</a> in matplotlib.
The above example shows a quick way to map a small set of categories to
 specific colors.  Note that you can use various formats for representing the colors.</p><p class="new">Now you can use this colormap in a simple scatterplot.</p><h2 id="pet-plotting-the-sequel-exercise-4">Pet Plotting (the sequel), Exercise 4</h2><p class="new">Bring in the necessary code such that a call make_scatter will create a figure
that looks like the following:
<img alt="scatter1.png" class="iw400 border center" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/dmap/data/cmaps/html/scatter1.png"/></p><p class="new">Note that now with a proper colormap and mapping categorical names to numbers, 
we no longer need to use <code>np.where</code> as we did before to slice up the data.</p><div class="ide code-starter clearfix"><pre><code>def make_scatter(n=100):

  # create data (use RandomPetData)
  # create the dataframe
  # map the categories to pet_idx attribute
  
  # build the colormap (use the yellow, green, darkgray, blue from above)
  # be sure to use ListedColormap
  
  # leave this code alone
  # only ONE call to scatter
  fig, axes = plt.subplots()
  paths = axes.scatter(df.x, df.y, c=df.pet_idx, s=50, cmap=cmap, edgecolor='black')
  h,values = paths.legend_elements()
  axes.legend(handles=h, labels=names)
  return fig</code></pre></div><h2 id="review">Review</h2><div class="font-sans container mt-1 mb-4 "><p>🎗Before you go, you should <strong>know</strong>:</p><div class="w-2/3 md:w-2/3"><div class="shadow-md"><div class="tab overflow-hidden border-t bg-green-200"><input class="absolute opacity-0" id="tab-multi-16" name="tabs" type="checkbox"/><label class="block p-3 leading-normal cursor-pointer" for="tab-multi-16"><span> What is a colormap </span></label><div class="tab-content overflow-hidden border-l-2 bg-orange-300 border-indigo-500 leading-normal"><p class="p-3">No Answer</p></div></div><div class="tab overflow-hidden border-t bg-green-200"><input class="absolute opacity-0" id="tab-multi-17" name="tabs" type="checkbox"/><label class="block p-3 leading-normal cursor-pointer" for="tab-multi-17"><span> When would you want to use a colormap </span></label><div class="tab-content overflow-hidden border-l-2 bg-orange-300 border-indigo-500 leading-normal"><p class="p-3">No Answer</p></div></div><div class="tab overflow-hidden border-t bg-green-200"><input class="absolute opacity-0" id="tab-multi-18" name="tabs" type="checkbox"/><label class="block p-3 leading-normal cursor-pointer" for="tab-multi-18"><span> What is a diverging colormap </span></label><div class="tab-content overflow-hidden border-l-2 bg-orange-300 border-indigo-500 leading-normal"><p class="p-3">No Answer</p></div></div><div class="tab overflow-hidden border-t bg-green-200"><input class="absolute opacity-0" id="tab-multi-19" name="tabs" type="checkbox"/><label class="block p-3 leading-normal cursor-pointer" for="tab-multi-19"><span> When do we use <code>imshow</code></span></label><div class="tab-content overflow-hidden border-l-2 bg-orange-300 border-indigo-500 leading-normal"><p class="p-3">No Answer</p></div></div></div></div></div><h1 class="section" id="section4">Lesson Assignment</h1><p class="new">Be sure you have run all the example code and understand what's being demonstrated. 
You will use a colormap to build a simple bar chart for the categorical data we used to demonstrate
 scatter plots. 
When you are done, your graph should look like the following:
<img alt="histogram.png" class="small mt-4" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/dmap/data/cmaps/html/histogram.png"/></p><h2 id="part-1-data-grouping">Part 1 Data Grouping</h2><p class="new">Create the following function <code>build_dataframe</code> that groups the data (by 'pet'), 
sorts it into descending groups (by count).  </p><pre><code>def build_dataframe(data):
  return df</code></pre><p class="new">After you're done, you should get something similar to the following output:</p><pre><code>df = build_dataframe(RandomPetData(100))
print(df.head())

    pet   x   y  pet_idx
0   dog  31  31       31
1   n/a  31  31       31
2   cat  24  24       24
3  fish  14  14       14</code></pre><p class="new">Note that <code>df.index</code> can be used to refer to the 'row' number</p><p class="new">Notes/Hints:</p><ul><li>Calling <code>reset_index()</code> gets the grouped data back into a standard dataframe</li></ul><div class="ide code-starter clearfix"><pre><code>def build_dataframe(data):
  return None</code></pre></div><h2 id="part-2-color-selection-">Part 2 Color Selection </h2><p class="new">Create a custom colormap using ColorBrewer.  Be sure to select the
 qualitative color scheme and use the 4-class Accent colors:</p><img alt="hex.png" class="border float-left mr-3 img" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/dmap/data/cmaps/html/hex.png"/><img alt="rgb.png" class="border img" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/dmap/data/cmaps/html/rgb.png"/><p class="new">The function <code>build_colormap</code> returns a matplotlib <code>ListedColormap</code></p><div class="ide code-starter clearfix"><pre><code>def build_colormap():
  return</code></pre></div><h2 id="part-3-bar-chart-using-colormap-">Part 3: Bar Chart using colormap </h2><p class="new">Create a function named <code>build_barchart</code> that creates the following graph:
<img alt="barNoLegend.png" class="iw400 border" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/dmap/data/cmaps/html/barNoLegend.png"/></p><p class="new">There are many ways to do this.  </p><ul><li>You <strong>cannot</strong> use the pandas plot function: 
<code>axes = df.plot.scatter(x='x', y='y', c='pet_idx', colormap=cmap)</code></li><li>You should only need to call <code>axes.bar( ... )</code> once
 <ul><li>the relevant parameters are: <code>x, height, color, label</code></li></ul></li><li>adding a legend the is optional</li><li>use <code>set_xticks</code> and <code>set_xticklabels</code> for the x axis</li><li>be sure to return the figure</li></ul><blockquote><p class="new"><em><strong>Coder's Log</strong></em> There's certainly not an issue with using Pandas to create plots, in fact, it provides 
a quick way to do data exploration.  The big issue is that the Pandas plotting 
API (how you create graphs) is just a thin layer on top of matplotlib; you 
lose the ability to do a lot of customization to the underlying visualization.<br/><br/>As you clean and polish your visualizations, in almost all situations, you
 end up needing to customize. However, once you know matplotlib, learning to use Panda's
 plotting API is easy.</p></blockquote><div class="ide code-starter clearfix"><pre><code>def build_barchart(df, cmap):
  pass</code></pre></div><p class="new">Once that is done, you can test it via</p><pre><code>
def demo_lesson():
    df = build_dataframe(RandomPetData(100))
    cmap = build_colormap() 
    fig = build_barchart(df, cmap)
demo_lesson()</code></pre><h1>Test and Submit</h1><p>Once you have finished, you can download your code (via <code>ide.tester</code>) and upload that file to Gradescope (find lesson with tag <strong>cmaps</strong>).</p><div class="my-4"><pre><code><strong># to list the tests available</strong><br/>print(ide.tester.list_tests())<br/><strong># to perform a specific test</strong><br/>print(ide.tester.test_functionality('name of test'))<br/><strong># to test your code (either works)</strong><br/>print(ide.tester.test_notebook())<br/>print(ide.tester.test_notebook(verbose=True))<br/><strong># to prepare and download your code</strong><br/>ide.tester.download_solution()</code></pre></div><div class="lesson-footer flex bg-gray-200 justify-center"><div class="lesson-footer-card displaycard bg-blue-200 border-t border-gray-400 max-w-2xl rounded overflow-hidden shadow-lg"><div class="px-6 py-4"><div class="title-text text-center font-bold text-xl">Color Maps</div><p class="text-center text-gray-800 text-xl">Color Spectrums</p><div class="text-center mt-6 text-xl"><i aria-hidden="true" class="fas fa-tags"></i> any questions on Piazza with <span class="font-bold">cmaps</span></div><div class="text-gray-700 text-base"> </div><div></div><div class="text-gray-700 text-base">References and Additional Readings</div><div class="text-xs p-2 border border-solid border-gray-500 bg-gray-300"> <div class="text-gray-700 px-4 m-2">• <!-- --> <a href="https://matplotlib.org/3.1.0/gallery/index.html" target="_blank">https://matplotlib.org/3.1.0/gallery/index.html</a></div><div class="text-gray-700 px-4 m-2">• <!-- --> <a href="https://blogs.egu.eu/divisions/gd/2017/08/23/the-rainbow-colour-map" target="_blank">https://blogs.egu.eu/divisions/gd/2017/08/23/the-rainbow-colour-map</a></div></div><div class="flex mt-4 border-t border-solid border-gray-500 justify-around bg-gray-200"><div class="text-gray-700 text-center px-4 m-2 text-sm">D.M. &amp; the 🐍</div><div class="text-gray-700 text-center px-4 m-2 text-sm"><strong>Version:</strong> <!-- -->SP21</div></div><div class="text-gray-700 mt-2 text-center text-sm font-bold">All Rights Reserved Michael Haberman</div><div class="text-gray-700 text-center text-sm">Do not distribute this notebook</div></div></div></div><div> </div><div class="ide code-starter clearfix"><pre><code># print(ide.tester.test_notebook()) 
# print(ide.tester.test_notebook(verbose=True)) 

# once you are ready -- run this 
# ide.tester.download_solution() 
</code></pre></div></div></div></body></html>