<!DOCTYPE html><html lang='en'><head><title>Zip Me Up: ngrams</title><meta charset="utf-8"><style>/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}h1{font-size:2em;margin:.67em 0}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}strong{font-weight:bolder}code{font-family:monospace,monospace;font-size:1em}img{border-style:none}input{font-family:inherit;font-size:100%;line-height:1.15;margin:0}input{overflow:visible}[type=checkbox]{box-sizing:border-box;padding:0}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}h1,h2,h3,h4,p,pre{margin:0}ul{list-style:none;margin:0;padding:0}html{font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e2e8f0}img{border-style:solid}input:-ms-input-placeholder{color:#a0aec0}input::-ms-input-placeholder{color:#a0aec0}input::-moz-placeholder{color:#a0aec0}h1,h2,h3,h4{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}input{padding:0;line-height:inherit;color:inherit}code,pre{font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}img{display:block;vertical-align:middle}img{max-width:100%;height:auto}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}.bg-gray-200{--bg-opacity:1;background-color:#edf2f7;background-color:rgba(237,242,247,var(--bg-opacity))}.bg-gray-300{--bg-opacity:1;background-color:#e2e8f0;background-color:rgba(226,232,240,var(--bg-opacity))}.bg-orange-300{--bg-opacity:1;background-color:#fbd38d;background-color:rgba(251,211,141,var(--bg-opacity))}.bg-green-200{--bg-opacity:1;background-color:#c6f6d5;background-color:rgba(198,246,213,var(--bg-opacity))}.bg-blue-200{--bg-opacity:1;background-color:#bee3f8;background-color:rgba(190,227,248,var(--bg-opacity))}.bg-blue-300{--bg-opacity:1;background-color:#90cdf4;background-color:rgba(144,205,244,var(--bg-opacity))}.border-gray-400{--border-opacity:1;border-color:#cbd5e0;border-color:rgba(203,213,224,var(--border-opacity))}.border-gray-500{--border-opacity:1;border-color:#a0aec0;border-color:rgba(160,174,192,var(--border-opacity))}.border-indigo-500{--border-opacity:1;border-color:#667eea;border-color:rgba(102,126,234,var(--border-opacity))}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.border-solid{border-style:solid}.border{border-width:1px}.border-l-2{border-left-width:2px}.border-t{border-top-width:1px}.cursor-pointer{cursor:pointer}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.justify-center{justify-content:center}.justify-around{justify-content:space-around}.float-left{float:left}.clearfix:after{content:"";display:table;clear:both}.font-sans{font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}.font-serif{font-family:Georgia,Cambria,"Times New Roman",Times,serif}.font-semibold{font-weight:600}.font-bold{font-weight:700}.h-64{height:16rem}.text-xs{font-size:.75rem}.text-sm{font-size:.875rem}.text-base{font-size:1rem}.text-xl{font-size:1.25rem}.leading-none{line-height:1}.leading-normal{line-height:1.5}.m-2{margin:.5rem}.my-3{margin-top:.75rem;margin-bottom:.75rem}.my-4{margin-top:1rem;margin-bottom:1rem}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mr-2{margin-right:.5rem}.mb-2{margin-bottom:.5rem}.mr-3{margin-right:.75rem}.mb-3{margin-bottom:.75rem}.mt-4{margin-top:1rem}.mb-4{margin-bottom:1rem}.mt-6{margin-top:1.5rem}.max-w-sm{max-width:24rem}.max-w-2xl{max-width:42rem}.object-contain{-o-object-fit:contain;object-fit:contain}.opacity-0{opacity:0}.overflow-hidden{overflow:hidden}.p-1{padding:.25rem}.p-2{padding:.5rem}.p-3{padding:.75rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.pl-3{padding-left:.75rem}.absolute{position:absolute}.shadow-md{box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06)}.shadow-lg{box-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -2px rgba(0,0,0,.05)}.shadow-inner{box-shadow:inset 0 2px 4px 0 rgba(0,0,0,.06)}.text-left{text-align:left}.text-center{text-align:center}.text-black{--text-opacity:1;color:#000;color:rgba(0,0,0,var(--text-opacity))}.text-gray-700{--text-opacity:1;color:#4a5568;color:rgba(74,85,104,var(--text-opacity))}.text-gray-800{--text-opacity:1;color:#2d3748;color:rgba(45,55,72,var(--text-opacity))}.whitespace-no-wrap{white-space:nowrap}.w-1\/2{width:50%}.w-2\/3{width:66.666667%}.w-full{width:100%}@media (min-width:768px){.md\:w-2\/3{width:66.666667%}}.text-tiny{font-size:.5rem!important}body{color:#000!important;font-size:1.25rem!important}.main-content{max-width:900px}.lesson{padding-left:15px!important;padding-right:10px!important;--bg-opacity:1;background-color:#edf2f7;background-color:rgba(237,242,247,var(--bg-opacity))}.main-content,html{font-family:Arial,Georgia,Verdana,"Times New Roman"!important}.lesson-footer-card,.lesson-overview-card{font-family:"Times New Roman"!important}.lesson-footer{margin-top:50px;margin-top:20px}.lesson ul{list-style-position:inside;list-style-type:none;margin-left:1em}.lesson ul li{padding-left:1em;padding-right:5px}.lesson ul li::before{content:"•";padding-right:5px}span{white-space:nowrap}p.new{padding-top:0;padding-bottom:.5em}p.new+p{padding-top:.5em}h1,h2,h3,h4{font-weight:700;margin-top:.25em!important;margin-bottom:.05em!important;font-family:Georgia,Cambria,"Times New Roman",Times,serif!important}h1{font-size:2em!important;clear:both;color:#000!important}div+h1,h2{margin-top:0!important}h2{margin-top:.5em!important;font-size:1.5em!important;clear:both;color:#8b0000!important}h3{font-size:1.25em!important;clear:both;color:#006400!important}h4{font-size:1em!important;clear:both;color:#00008b!important}ul{margin-bottom:30px}.lesson a{text-decoration:underline;color:#00f}.title-text{font-size:2rem}.shadow-lg{box-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -2px rgba(0,0,0,.5)}img.border{border:1px solid #021a40;margin-top:.5rem;margin-bottom:.75rem}img.iw500{height:auto;width:auto;max-width:500px}code{font-size:smaller}pre code{font-size:15px}.code{background:#f4f4f4;font-family:monospace;font-size:15px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default;touch-action:none;-webkit-touch-callout:none;-webkit-tap-highlight-color:transparent;clear:both;border:1px solid #ddd;color:#666;page-break-inside:avoid;display:block;min-width:840px;max-width:840px;overflow:scroll;line-height:1.6;margin-bottom:1.6em;padding:1em 1.5em;-moz-tab-size:2;-o-tab-size:2;tab-size:2;word-wrap:break-word;white-space:pre-wrap;border-left:3px solid #f36d33!important}pre code:not(.line-number){background:#f4f4f4;font-family:monospace;font-size:15px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default;touch-action:none;-webkit-touch-callout:none;-webkit-tap-highlight-color:transparent;clear:both;border:1px solid #ddd;color:#666;page-break-inside:avoid;display:block;min-width:840px;max-width:840px;overflow:scroll;line-height:1.6;margin-bottom:1.6em;padding:1em 1.5em;-moz-tab-size:2;-o-tab-size:2;tab-size:2;word-wrap:break-word;white-space:pre-wrap;border-left:3px solid #f36d33}div.code-starter>pre code{border-left:3px solid #fdff44!important;background-image:radial-gradient(rgba(0,150,0,.75),#000 120%);color:#fff;font:.9rem Inconsolata,monospace}div.code-starter>pre code::after{content:"\a$_"}.code pre{counter-reset:line}code.line-number{counter-increment:line}code.line-number::before{padding:0 .5em;margin-right:.5em;border-right:1px solid #ddd}code.line-number:before{content:"0" counter(line)}.tab{font-size:1rem;border-color:#8c6728}.tab-content{max-height:0;max-width:100%;transition:max-height .35s}.tab input:checked~.tab-content{max-height:100vh}.tab input:checked+label{padding:1rem;border-left-width:2px;border-color:#6574cd;background-color:#f8fafc;color:#6574cd}.tab label::after{float:right;right:0;top:0;display:block;width:1em;height:1.5em;line-height:1.5;font-size:1rem;text-align:center;transition:all .35s}.tab input[type=checkbox]+label::after{content:"+";font-weight:700;border-width:1px;border-radius:9999px;border-color:#8c6728}.tab input[type=checkbox]:checked+label::after{transform:rotate(315deg);background-color:#6574cd;color:#f8fafc}</style>
<script src="https://kit.fontawesome.com/7efc4bcee2.js" crossOrigin="anonymous"></script>
<script>
    let stateCheck = setInterval(function(){
      if (document.readyState === 'complete') {
        clearInterval(stateCheck);
        let s1 = document.getElementById('start');
        // console.log('doc is ready', s1);
        if (s1) {
           s1.setAttribute('tabindex', '-1');
           s1.focus(); 
           s1.scrollIntoView({behavior: 'smooth'}); 
           setTimeout(function(){s1.blur()}, 500);
           // console.log('focus set');
        }
      }
    }, 200);
    </script>
</head><body class="lesson"><div class="main-content lesson bg-gray-200 text-black p-1 pl-3 font-serif"><div class="md-inner">
<div id="start" class="section">&nbsp;</div><h1 class="overview"></h1><div class="lesson-overview bg-gray-200 flex justify-center"><div class="text-center px-4 py-2 m-2"><div class="lesson-overview-card displaycard bg-blue-200 max-w-sm rounded overflow-hidden shadow-lg"><div> </div><img alt="Text" class="object-contain h-64 w-full" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/dmap/py/zipmeup/html/PythonFiles-sm.png"/><div class="px-6 py-4"><div class="title-text text-center leading-none font-bold text-xl">Zip Me Up: ngrams</div><p class="text-center mt-2 text-gray-800 text-xl">zip power</p><div class="text-gray-700 text-base"> </div><div class="text-center mb-3"><span class="inline-block bg-gray-300 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2">#zip</span><span class="inline-block bg-gray-300 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2">#ngrams</span></div><div class="flex border-t border-solid border-gray-500 shadow-inner justify-around bg-blue-300"><div class="text-gray-700 text-center px-4 m-2 text-sm"><span class="whitespace-no-wrap">D.M. &amp; the 🐍</span></div><div class="text-gray-700 text-center px-4 m-2 text-sm"><span class="whitespace-no-wrap"><strong>Version:</strong> <!-- -->SP21</span></div></div><div class="text-gray-700 mt-1 text-center text-tiny">All Rights Reserved</div></div></div></div><div class="text-center px-4 py-2 m-2 w-1/2"><div class="displaycard bg-gray-200 max-w-sm rounded overflow-hidden shadow-lg"><div class="px-6 py-4 text-left"><div class="text-center font-bold text-xl">Zip Me Up: ngrams<br/><div><span>prerequisites</span><div class="text-center text-xs mb-2">(start only after finishing)</div><p class="max-w-sm text-gray-800 text-sm">⦿ <strong>array slicing</strong></p><p class="max-w-sm text-gray-800 text-sm">⦿ <strong>comprehensions</strong></p><p class="max-w-sm text-gray-800 text-sm">⦿ <strong>starpower</strong></p><p class="max-w-sm text-gray-800 text-sm">⦿ <strong>ngrams</strong></p></div></div></div><div class="px-6 py-4 text-left text-gray-800"><div class="text-center font-bold text-xl">Colab Notes</div><p class="max-w-sm text-sm">1. <strong>Copy</strong> this notebook <img alt="copy2drive.png" class="inline-block" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/dmap/py/zipmeup/html/copy2drive.png"/></p><p class="max-w-sm text-sm">2. <strong>Update</strong> the <strong><code>NET_ID</code></strong> in the notebook</p><p class="max-w-sm text-gray-800 text-sm">3. <strong>Hit ▶️ </strong> to install the INFO 490 IDE</p><div class="text-center font-bold text-xl"> </div><div class="text-center font-bold text-xl">Jupyter/PyCharm Notes</div><p class="max-w-sm text-gray-800 text-sm text-left">The testing framework does <strong>not work</strong> (at this time) for Jupyter  notebooks or local code development.</p></div></div></div></div><h1 class="section" id="section1">Zip Me Up: ngrams</h1><p class="new">This lessons fills in the details about Python's built-in <code>zip</code> function. It
's a very powerful utility to help manipulate and maneuver data lists/arrays.</p><h2 id="ngrams-revisited">Ngrams Revisited</h2><p class="new">As a quick refresher, ngrams are a way to group words together (usually 
from processing text).  They are contiguous sequence of n tokens.<br/>For example, tri-grams (N = 3) for the first 2 sentences in 
<strong>The Cat in The Hat</strong> would be:</p><pre><code>The sun did
sun did not
did not shine
not shine It
shine It was
It was too
was too wet
too wet to
wet to play</code></pre><p class="new">You can print out the contents of the book using the following command:</p><div class="ide code-starter clearfix"><pre><code>import LessonUtil as Util
print(Util.read_data_file("cith.txt")[0:100])</code></pre></div><p class="new">One of the easiest ways to generate ngrams is to use Python's array slicing 
and comprehension syntax:</p><pre><code>def get_ngrams(words, n):
  total = len(words) - (n-1)
  return [words[i:i+n] for i in range(total)]</code></pre><div class="ide code-starter clearfix"><pre><code></code></pre></div><p class="new">Type in the above code and be sure to experiment.  You should be able to parse
 this out:</p><ul><li>Experiment with some simple sentences</li><li>'Prove' to yourself that if there is <strong>M</strong> words, the number of <strong><code>n</code></strong>grams would be <code>M - (n - 1)</code></li><li><code>words[i:i+n]</code> is just a slice <code>n</code> long of the array words</li><li><code>[ slice for i in range(total) ]</code></li></ul><h1 class="section" id="section2">Zip Me UP</h1><p class="new">We have seen that working with parallel arrays can be cumbersome. The Python <code>zip</code> 
function can help manage the situation by taking different arrays and 
combining them into tuples: (Be sure to run and understand what is happening).</p><div class="ide code-starter clearfix"><pre><code>players = ["A. Gordon", "A. Holiday", "A. Nader"]
teams = ["ORL", "IND", "OKC"]
y_old = [23, 22, 25]
h_ins = [81, 73, 78]
w_lbs = [220, 185, 225]

values = zip(players, teams, y_old, h_ins, w_lbs)
for t in values:
  print(t)</code></pre></div><p class="new">The <code>zip</code> function returns an object (i.e. a custom type) that can be used as an iterator.<br/>If you want all the items in a list or you want access to a specific element, you simply 
convert the output into a list:</p><div class="ide code-starter clearfix"><pre><code>values = zip(players, teams, y_old, h_ins, w_lbs)
dataset = list(values)
print(dataset)
print(dataset[1])</code></pre></div><p class="new">Note that we have to recreate the value assigned to <code>values</code>. Once you iterate 
though the object, it is essentially empty.</p><p class="new">With <code>zip</code> and list comprehensions, we can even create a dictionary of data 
from parallel arrays:</p><pre><code>values = list(zip(players, teams, y_old, h_ins, w_lbs))
keys = ['p{}'.format(i) for i in range(len(values))]

dataset = {k:v for k,v in zip(keys, values)}
print(dataset)</code></pre><div class="ide code-starter clearfix"><pre><code># YES, type in the above code (sorry, it's for your own good)</code></pre></div><h3 id="example--building-columns-from-rows-using-zip">Example:  Building columns from rows using zip</h3><p class="new">Here's a more complex example of using <code>zip</code> to wrangle your data from one format to another.
Look at the following familiar dataset.  Our goal is to easily get a full column of 
values in a single list (or tuple).  For example, the first column would 
be <code>['a',1,4,7]</code> as a list or <code>('a',1,4,7)</code> as a tuple</p><pre><code>a, b, c
1, 2, 3
4, 5, 6
7, 8, 9</code></pre><p class="new">So for this matrix (or table) of data, we want to get the 3 columns of data.<br/>Each column will have 4 items.  This is an example of a column vector.</p><h3 id="set-up">Set Up</h3><p class="new">We can easily read this data into a list of lists.  So the first row is the header, 
the second row is the list [1,2,3], etc.  You will want to be sure this code 
is run before all of the following examples.<br/>Before you run this code, try to figure out what gets printed on the last line.</p><pre><code>table = [ 
['a','b','c'],
[ 1,  2,  3],
[ 4,  5,  6],
[ 7,  8,  9] ]

header = table[0]
rows   = table[1:] # this right here, is why we love slicing
print(header, rows)
print(rows[1][1])  # what gets printed here (figure it out before running)</code></pre><p class="new">So for this matrix (or table) of data, we want to get the 3 columns of data.  </p><h4 id="attempt-1">Attempt 1:</h4><p class="new">Our first attempt will be to use the list concatenation operator '+':</p><div class="ide code-starter clearfix"><pre><code>column0 = header + rows[0]
print(column0)</code></pre></div><p class="new">This is not what we wanted.  Does the output make sense to you?<br/>However, even if you wanted do the following: </p><pre><code>t = header[0] + str(rows[0][0]) + str(rows[1][0]) + str(rows[2][0])
print(t)</code></pre><p class="new">The data is hard coded. You want to be able to build this regardless of the numbers of rows in the dataset.</p><h4 id="attempt-2">Attempt 2:</h4><p class="new">You could try to use enumeration:</p><div class="ide code-starter clearfix"><pre><code>out = []
for i in range(0, len(header)):
  l = header[i]
  v = rows[i]
  out.append( (l,v) )
print(out)</code></pre></div><p class="new">This is closer. It at least builds an array of tuples .. wrong values though. 
Before continuing, think about what you would try next. You will get so much
 more out of this lesson if you try to solve it first.</p><h4 id="attempt-3-we-need-one-more-loop">Attempt 3: We need one more loop:</h4><pre><code>out = []
for i in range(0, len(header)):
  l = header[i]
  row = rows[i]
  for j in range(0, len(row)):
    v = row[j]
    out.append( (l,v) )
print(out)</code></pre><p class="new">Does that work? </p><p class="new">That is a lot of code.  But it's important that you understand what is happening.<br/>We are looping through the rows in the table (<code>i</code> is the row index).  Then for each row, we are 
looping for each of the values found at row <code>i</code> (<code>j</code> is the column index). So any cell is at <code>table[i][j]</code>.  </p><h4 id="attempt-4">Attempt 4:</h4><p class="new">Let's try to use <code>zip</code> for solving this. As we have seen, <code>zip</code> works great if you have all 
your arrays ahead of time.  Every parameter is suppose to be a list that will
 be "zipped up" with the other parameters. If we pass in a list for its parameters, <code>zip</code> will do the wrong thing:</p><pre><code>print(rows)
print(list(zip(rows)))</code></pre><div class="ide code-starter clearfix"><pre><code></code></pre></div><p class="new">The function <code>zip</code> is looking for multiple arguments to <code>zip</code> up.  In the above example, the <code>zip</code> 
function is only being passed one parameter (the rows).</p><h4 id="fixing-zip">"Fixing" <code>zip</code>:</h4><p class="new">As we have seen Python has a special 'operator', the ✱, that basically
 takes a list, 
and flattens it into its single elements:</p><div class="ide code-starter clearfix"><pre><code>items = [1,2,3]
print(items)
print(*items)</code></pre></div><p class="new">We can use that operator on the list we pass into <code>zip</code>.  This operator will 
essentially pass each row to <code>zip</code> as a separate argument:</p><pre><code>print(list(zip(*rows)))</code></pre><div class="ide code-starter clearfix"><pre><code></code></pre></div><p class="new">Oh <strong>WOW</strong>. So close. Make sure you can take apart that syntax and 
understand how it works. 
So <code>zip(*rows)</code> is similar to saying: </p><p class="new"><code>zip(rows[0], rows[1], rows[2])</code></p><p class="new">But we never had to hard code the parameters (those numbers, 0, 1, 2 are 'hard coded').<br/>If the number of rows in the table changes, we won't have to change our code.</p><h3 id="zipping-it-up-finally">Zipping It Up (finally)</h3><pre><code>table = [ 
   ['a','b','c'],
   [1,2,3],
   [4,5,6],
   [7,8,9] 
]

print(list(zip(*table)))</code></pre><div class="ide code-starter clearfix"><pre><code></code></pre></div><p class="new">That syntax can be formidable, but once you know what <code>zip</code> does and how the ✱ operator works, 
reading complex syntax becomes a bit easier.</p><h1 class="section" id="section3">Ngrams Revisited (Again)</h1><img alt="ngrams.png" class="border my-3 float-left mr-3 iw500" src="https://raw.githubusercontent.com/habermanUIUC/CodeStoryLessons/main/lessons/dmap/py/zipmeup/html/ngrams.png"/><p class="new">We can use <code>zip</code> to build ngrams as well.  Lets start with some simple data:</p><p class="new"><code>words = "The sun did not shine It was too wet to play".split()</code></p><h2 id="bi-grams">Bi-grams</h2><p class="new">For creating bi-grams, we pass in the words AND the words after removing the first word:</p><pre><code># bi-grams
bigrams = list(zip(words, words[1:]))
print(bigrams)</code></pre><div class="ide code-starter clearfix"><pre><code>words = "The sun did not shine It was too wet to play".split()</code></pre></div><h2 id="tri-grams">Tri-grams</h2><p class="new">For tri-grams, it's now 3 lists we need to pass to <code>zip</code>:</p><pre><code># tri-grams
trigrams = list(zip(words, words[1:], words[2:]))
print(trigrams)</code></pre><h2 id="n-grams">N-grams</h2><p class="new">Do you see a pattern ?</p><div class="font-sans container mt-1 mb-4 "><div class="w-2/3 md:w-2/3"><div class="shadow-md"><div class="tab overflow-hidden border-t bg-green-200"><input class="absolute opacity-0" id="tab-multi-6" name="tabs" type="checkbox"/><label class="block p-3 leading-normal cursor-pointer" for="tab-multi-6"><span> What's the pattern for 4 words? </span></label><div class="tab-content overflow-hidden border-l-2 bg-orange-300 border-indigo-500 leading-normal"><p class="p-3"><span><code>zip(words, words[1:], words[2:], words[3:])</code></span></p></div></div></div></div></div><p class="new">We can generalize the parameter pattern using <code>words</code> and <code>n</code>:</p><pre><code>slices = [words[i:] for i in range(n)]</code></pre><p class="new">and then pass the slices to <code>zip</code>:</p><pre><code>ngrams = zip( *slices )</code></pre><p class="new">Once again, be certain you understand why we need to 
unpack the slices before sending them to <code>zip</code>. Finally, 
putting it all together:</p><pre><code>def find_ngrams_v1(words, n):
  return zip(*[words[i:] for i in range(n)])

print(list(find_ngrams_v1(words, 3)))</code></pre><div class="ide code-starter clearfix"><pre><code></code></pre></div><h3 id="joining-lists-">Joining lists </h3><p class="new">If you ever want to present ngrams as a unified string, just use string's <code>join</code> 
method with each of the ngram's list:</p><div class="code-block code clearfix"><pre><code class="line-number">def find_ngrams_v2(words, n):
</code><code class="line-number">  ngrams = zip(*[words[i:] for i in range(n)])
</code><code class="line-number">  return [" ".join(ngram) for ngram in ngrams]
</code><code class="line-number">  
</code><code class="line-number">print(list(find_ngrams_v2(words, 3)))
</code></pre></div><p class="new">That was easy 🤕!! Take a look at the <code>find_ngrams_v2</code>.  </p><p class="new">At first glance, it may seem impossible to understand (esp. lines <code>2</code> and <code>3</code>, 
but you now have the tools to unpack complex Pythonic code that you will see out in the wild.</p><h2 id="review">Review</h2><div class="font-sans container mt-1 mb-4 "><p>🎗Before you go, you should <strong>know</strong>:</p><div class="w-2/3 md:w-2/3"><div class="shadow-md"><div class="tab overflow-hidden border-t bg-green-200"><input class="absolute opacity-0" id="tab-multi-7" name="tabs" type="checkbox"/><label class="block p-3 leading-normal cursor-pointer" for="tab-multi-7"><span> What does <code>zip</code> do? </span></label><div class="tab-content overflow-hidden border-l-2 bg-orange-300 border-indigo-500 leading-normal"><p class="p-3">No Answer</p></div></div><div class="tab overflow-hidden border-t bg-green-200"><input class="absolute opacity-0" id="tab-multi-8" name="tabs" type="checkbox"/><label class="block p-3 leading-normal cursor-pointer" for="tab-multi-8"><span> What do you pass into <code>zip</code> ? </span></label><div class="tab-content overflow-hidden border-l-2 bg-orange-300 border-indigo-500 leading-normal"><p class="p-3">No Answer</p></div></div><div class="tab overflow-hidden border-t bg-green-200"><input class="absolute opacity-0" id="tab-multi-9" name="tabs" type="checkbox"/><label class="block p-3 leading-normal cursor-pointer" for="tab-multi-9"><span> What is the return type of <code>zip</code> ? </span></label><div class="tab-content overflow-hidden border-l-2 bg-orange-300 border-indigo-500 leading-normal"><p class="p-3">No Answer</p></div></div></div></div></div><h1 class="section" id="section4">Lesson Assignment:</h1><p class="new">Be sure to type in all the examples first. For this lesson you will 
build on <code>find_ngrams_v2</code>. </p><h2 id="create-it">Create it</h2><p class="new">Create a function named <code>find_ngrams_bow</code>:</p><ul><li>it has 4 parameters (<code>words, n, bow=False, stopwords=[]</code>)</li><li><code>words</code> is a list of tokens/words</li><li>each word should be converted to lowercase</li><li>if <code>bow</code> is <code>True</code>, create ngrams such that order of the ngram words is no longer
considered.  Hence, each ngram is simply a <strong>b</strong>ag-<strong>o</strong>f-<strong>w</strong>ords (BOW). You
can implement this by always using the alphabetical order for the words. 
For example the two ngrams, 'he said fine' and 'fine he said' would be the
same ngram in the BOW model.</li><li>if stopwords contains words, those words should not be considered part of the text</li><li>the auto-grader is set for a 10 second CPU limit, but you should be able to
solve this in sub-second time.</li></ul><h2 id="test-it">Test it</h2><p class="new">Once that is done, be sure to test it!</p><div class="ide code-starter clearfix"><pre><code>import LessonUtil as Util
import collections

def find_ngrams_bow()
   return []
   
def simple_test():
    text = Util.read_data_file('hp1.txt')
    ngrams = find_ngrams_bow(text.split(), 3)
    top5 =  collections.Counter(ngrams).most_common(5) 
    print(top5)

print(ide.tester.test_function('find_ngrams_bow'))</code></pre></div><h2 id="use-it">Use it</h2><p class="new">With everything working, you will now use <code>find_ngrams_bow</code> to help support your
research:</p><h3 id="question-1--write-a-function-named-q1-that-takes-no-parameters">Question 1:  write a function named <code>q1</code> that takes no parameters.</h3><p class="new">The function will use <code>find_ngrams_bow</code> to answer the following question: </p><p class="new">As the n in <strong>n</strong>grams increases, would you expect the BOW ngram counts to be 
higher or lower than non-BOW version?  </p><ul><li>make sure you understand the question</li><li>answer it BEFORE writing any code</li><li>now write the code inside <code>q1</code> that will help you confirm/deny your answer.  You
can use any method you want (print statements, analytical calculations, etc).</li><li><code>q1</code> provides evidence to support the truth</li></ul><h3 id="question-2--write-a-function-named-q2-that-takes-no-parameters">Question 2:  write a function named <code>q2</code> that takes no parameters.</h3><p class="new">The function will use <code>find_ngrams_bow</code> to answer the following question: </p><p class="new">If you add stopwords, should you see higher or lower counts in your ngrams?</p><ul><li>make sure you understand the question</li><li>answer it BEFORE writing any code</li><li>now write the code inside <code>q2</code> that will help you confirm/deny your answer.  You
can use any method you want (print statements, analytical calculations, etc).</li><li><code>q2</code> provides evidence to support the truth</li></ul><h1>Test and Submit</h1><p>Once you have finished, you can download your code (via <code>ide.tester</code>) and upload that file to Gradescope (find lesson with tag <strong>zipmeup</strong>).</p><div class="my-4"><pre><code><strong># to list the tests available</strong><br/>print(ide.tester.list_tests())<br/><strong># to perform a specific test</strong><br/>print(ide.tester.test_functionality('name of test'))<br/><strong># to test your code (either works)</strong><br/>print(ide.tester.test_notebook())<br/>print(ide.tester.test_notebook(verbose=True))<br/><strong># to prepare and download your code</strong><br/>ide.tester.download_solution()</code></pre></div><div class="lesson-footer flex bg-gray-200 justify-center"><div class="lesson-footer-card displaycard bg-blue-200 border-t border-gray-400 max-w-2xl rounded overflow-hidden shadow-lg"><div class="px-6 py-4"><div class="title-text text-center font-bold text-xl">Zip Me Up: ngrams</div><p class="text-center text-gray-800 text-xl">zip power</p><div class="text-center mt-6 text-xl"><i aria-hidden="true" class="fas fa-tags"></i> any questions on Piazza with <span class="font-bold">zipmeup</span></div><div class="text-gray-700 text-base"> </div><div></div><div class="text-gray-700 text-base">References and Additional Readings</div><div class="text-xs p-2 border border-solid border-gray-500 bg-gray-300"> <div class="text-gray-700 px-4 m-2">• <!-- --> <a href="http://text-analytics101.rxnlp.com/2014/11/what-are-n-grams.html" target="_blank">http://text-analytics101.rxnlp.com/2014/11/what-are-n-grams.html</a></div><div class="text-gray-700 px-4 m-2">• <!-- --> <a href="https://medium.com/@happymishra66/zip-in-python-48cb4f70d013" target="_blank">https://medium.com/@happymishra66/zip-in-python-48cb4f70d013</a></div></div><div class="flex mt-4 border-t border-solid border-gray-500 justify-around bg-gray-200"><div class="text-gray-700 text-center px-4 m-2 text-sm">D.M. &amp; the 🐍</div><div class="text-gray-700 text-center px-4 m-2 text-sm"><strong>Version:</strong> <!-- -->SP21</div></div><div class="text-gray-700 mt-2 text-center text-sm font-bold">All Rights Reserved Michael Haberman</div><div class="text-gray-700 text-center text-sm">Do not distribute this notebook</div></div></div></div><div> </div><div class="ide code-starter clearfix"><pre><code># print(ide.tester.test_notebook()) 
# print(ide.tester.test_notebook(verbose=True)) 

# once you are ready -- run this 
# ide.tester.download_solution() 
</code></pre></div></div></div></body></html>